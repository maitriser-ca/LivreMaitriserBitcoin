<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>La chaîne de blocs (La blockchain)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article data-line-1">
<div id="header">
</div>
<div id="content">
<div class="sect1 data-line-2">
<h2 id="blockchain">La chaîne de blocs (La blockchain)</h2>
<div class="sectionbody">
<div class="sect2 data-line-4">
<h3 id="_présentation">Présentation</h3>
<div class="paragraph data-line-6">
<p>La structure de données de la chaîne de blocs est une liste ordonnée et rétro-liée aux blocs de transactions. La chaîne de blocs peut être stockée sous forme de fichier plat ou dans une simple base de données. Le client Bitcoin Core stocke les métadonnées de la chaîne de blocs à l&#8217;aide de la base de données LevelDB de Google. Les blocs sont &quot;rétro-liés&quot;, chacun se référant au bloc précédent dans la chaîne. La chaîne de blocs est souvent visualisée comme une pile verticale, avec des blocs superposés les uns sur les autres et le premier bloc servant de base à la pile. La visualisation de blocs empilés les uns sur les autres entraîne l&#8217;utilisation de termes tels que &quot;hauteur&quot; pour désigner la distance par rapport au premier bloc, et &quot;sommet&quot; ou &quot;pointe&quot; pour désigner le bloc le plus récemment ajouté.</p>
</div>
<div class="paragraph data-line-8">
<p>Chaque bloc de la chaîne de blocs est identifié par un hachage, généré à l&#8217;aide de l&#8217;algorithme de hachage cryptographique SHA256 sur l&#8217;en-tête du bloc. Chaque bloc fait également référence à un bloc précédent, connu sous le nom de bloc <em>parent</em>, via le champ &quot;hachage de bloc précédent&quot; dans l&#8217;en-tête de bloc. En d&#8217;autres termes, chaque bloc contient le hachage de son parent dans sa propre en-tête. La séquence de hachages reliant chaque bloc à son parent crée une chaîne remontant jusqu&#8217;au premier bloc jamais créé, connu sous le nom de <em>bloc de genèse</em>.</p>
</div>
<div class="paragraph data-line-10">
<p>Bien qu&#8217;un bloc n&#8217;ait qu&#8217;un seul parent, il peut temporairement avoir plusieurs enfants. Chacun des enfants fait référence au même bloc que son parent et contient le même hachage (parent) dans le champ &quot;hachage du bloc précédent&quot;. Plusieurs enfants apparaissent lors d&#8217;une &quot;fourche&quot; de chaîne de blocs, une situation temporaire qui se produit lorsque différents blocs sont découverts presque simultanément par différents mineurs (voir <a href="#forks">[forks]</a>). Finalement, un seul bloc enfant devient une partie de la chaîne de blocs et la &quot;fourche&quot; est résolu. Même si un bloc peut avoir plusieurs enfants, chaque bloc ne peut avoir qu&#8217;un seul parent. En effet, un bloc a un seul champ &quot;hachage de bloc précédent&quot; faisant référence à son parent unique.</p>
</div>
<div class="paragraph data-line-12">
<p>Le champ &quot;hachage du bloc précédent&quot; se trouve à l&#8217;intérieur de l&#8217;en-tête du bloc et affecte ainsi le hachage du bloc <em>courant</em>. La propre identité de l&#8217;enfant change si l&#8217;identité du parent change. Lorsque le parent est modifié de quelque manière que ce soit, le hachage du parent change. Le hachage modifié du parent nécessite une modification du pointeur &quot;hachage de bloc précédent&quot; de l&#8217;enfant. Cela entraîne à son tour la modification du hachage de l&#8217;enfant, ce qui nécessite une modification du pointeur du petit-enfant, qui à son tour modifie le petit-enfant, et ainsi de suite. Cet effet de cascade garantit qu&#8217;une fois qu&#8217;un bloc est suivi de plusieurs générations, il ne peut pas être modifié sans forcer un recalcul de tous les blocs suivants. Parce qu&#8217;un tel recalcul nécessiterait un calcul énorme (et donc une consommation d&#8217;énergie), l&#8217;existence d&#8217;une longue chaîne de blocs rend immuable l&#8217;historique profond de la chaîne de blocs, ce qui est une caractéristique clé de la sécurité du bitcoin.</p>
</div>
<div class="paragraph data-line-14">
<p>Une façon de penser à la chaîne de blocs est comme des couches dans une formation géologique ou un échantillon de carotte de glacier. Les couches de surface peuvent changer avec les saisons, voire être soufflées avant d&#8217;avoir le temps de s&#8217;installer. Mais dès que l&#8217;on descend à quelques centimètres de profondeur, les couches géologiques deviennent de plus en plus stables. Au moment où vous regardez quelques centaines de mètres plus bas, vous regardez un instantané du passé qui est resté intact pendant des millions d&#8217;années. Dans la chaîne de blocs, les quelques blocs les plus récents peuvent être révisés s&#8217;il y a un recalcul en chaîne dû à une fourche. Les six premiers blocs sont comme quelques centimètres de terre arable. Mais une fois que vous allez plus profondément dans la chaîne de blocs, au-delà de six blocs, les blocs sont de moins en moins susceptibles de changer. Après 100 blocs de retour, il y a tellement de stabilité que la transaction coinbase - la transaction contenant le bitcoin nouvellement extrait - peut être dépensée. Quelques milliers de blocs en arrière (un mois) et la chaîne de blocs est une histoire établie, à toutes fins pratiques. Alors que le protocole permet toujours à une chaîne d&#8217;être annulée par une chaîne plus longue et alors que la possibilité qu&#8217;un bloc soit inversé existe toujours, la probabilité d&#8217;un tel événement diminue au fil du temps jusqu&#8217;à ce qu&#8217;elle devienne infinitésimale.</p>
</div>
</div>
<div class="sect2 data-line-16">
<h3 id="_structure_dun_bloc">Structure d&#8217;un bloc</h3>
<div class="paragraph data-line-18">
<p>Un bloc est une structure de données de conteneur qui agrège les transactions pour les inclure dans le grand livre public, la chaîne de blocs. Le bloc est composé d&#8217;un en-tête, contenant des métadonnées, suivi d&#8217;une longue liste de transactions qui constituent l&#8217;essentiel de sa taille. L&#8217;en-tête de bloc est de 80 octets, alors que la transaction moyenne est d&#8217;au moins 400 octets et que le bloc moyen contient plus de 1900 transactions. Un bloc complet, avec toutes les transactions, est donc 10 000 fois plus grand que l&#8217;en-tête du bloc. <a href="#block_structure1">La structure d&#8217;un bloc</a> décrit la structure d&#8217;un bloc.</p>
</div>
<table id="block_structure1" class="tableblock frame-all grid-all stretch pagebreak-before data-line-24">
<caption class="title">Table 1. La structure d&#8217;un bloc</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Taille</th>
<th class="tableblock halign-left valign-top">Champ</th>
<th class="tableblock halign-left valign-top">La description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Taille de bloc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La taille du bloc, en octets, suivant ce champ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">80 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En-tête de bloc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plusieurs champs forment l&#8217;en-tête du bloc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1–9 octets (VarInt)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compteur de transactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combien de transactions suivent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">variables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Les transactions enregistrées dans ce bloc</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2 data-line-33">
<h3 id="block_header">En-tête de bloc</h3>
<div class="paragraph data-line-35">
<p>L&#8217;en-tête de bloc se compose de trois ensembles de métadonnées de bloc. Tout d&#8217;abord, il y a une référence à un hachage de bloc précédent, qui connecte ce bloc au bloc précédent dans la chaîne de blocs. Le deuxième ensemble de métadonnées, à savoir <em>difficulty</em>, <em>timestamp</em> et <em>nonce</em>, concerne la concurrence minière, comme détaillé dans <a href="#mining">[mining]</a>. La troisième métadonnée est la racine de l&#8217;arbre Merkle, une structure de données utilisée pour résumer efficacement toutes les transactions du bloc. <a href="#block_header_structure_ch09">La structure de l&#8217;entête du bloc</a> décrit la structure d&#8217;un en-tête de bloc.</p>
</div>
<table id="block_header_structure_ch09" class="tableblock frame-all grid-all stretch data-line-41">
<caption class="title">Table 2. La structure de l&#8217;entête du bloc</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Taille</th>
<th class="tableblock halign-left valign-top">Champ</th>
<th class="tableblock halign-left valign-top">La description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un numéro de version pour suivre les mises à niveau du logiciel/protocole</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hachage de bloc précédent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Une référence au hachage du bloc précédent (parent) dans la chaîne</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Racine de Merkle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un hachage de la racine de l&#8217;arbre Merkle des transactions de ce bloc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Horodatage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le temps de création approximatif de ce bloc (en secondes écoulées depuis Unix Epoch)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cible de difficulté</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La cible de difficulté de l&#8217;algorithme Proof-of-Work (ou Preuve de travail) pour ce bloc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nonce</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un compteur utilisé pour l&#8217;algorithme de preuve de travail</p></td>
</tr>
</tbody>
</table>
<div class="paragraph data-line-51">
<p>Le nonce, la cible de difficulté et l&#8217;horodatage sont utilisés dans le processus d&#8217;extraction et seront discutés plus en détail dans <a href="#mining">[mining]</a>.</p>
</div>
</div>
<div class="sect2 data-line-54">
<h3 id="block_hash">Identificateurs de bloc : hachage d&#8217;en-tête de bloc et hauteur de bloc</h3>
<div class="paragraph data-line-56">
<p>L&#8217;identifiant primaire d&#8217;un bloc est son hachage cryptographique, une empreinte digitale, réalisée en hachant deux fois l&#8217;en-tête du bloc via l&#8217;algorithme SHA256. Le hachage de 32 octets résultant est appelé <em>hachage de bloc</em> mais est plus précisément le <em>hachage d&#8217;en-tête de bloc</em>, <span role="keep-together">car seul l'en-tête de bloc est utilisé pour le calculer. Par exemple,</span> 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f est le hachage de bloc du premier bloc bitcoin jamais créé. Le hachage de bloc identifie un bloc de manière unique et sans ambiguïté et peut être dérivé indépendamment par n&#8217;importe quel nœud en double hachant simplement l&#8217;en-tête de bloc avec l&#8217;algorithme SHA256.</p>
</div>
<div class="paragraph data-line-58">
<p>Notez que le hachage de bloc n&#8217;est pas réellement inclus dans la structure de données du bloc, ni lorsque le bloc est transmis sur le réseau, ni lorsqu&#8217;il est stocké sur le stockage de persistance d&#8217;un nœud dans le cadre de la chaîne de blocs. Au lieu de cela, le hachage du bloc est calculé par chaque nœud lorsque le bloc est reçu du réseau. Le hachage de bloc peut être stocké dans une table de base de données distincte dans le cadre des métadonnées du bloc, pour faciliter l&#8217;indexation et une récupération plus rapide des blocs à partir du disque.</p>
</div>
<div class="paragraph data-line-60">
<p>Une deuxième façon d&#8217;identifier un bloc est par sa position dans la chaîne de blocs, appelée le <span role="keep-together"><em>hauteur de bloc</em>. Le premier bloc jamais créé est à la hauteur de bloc 0 (zéro) et est le</span> <span role="keep-together">même bloc qui était précédemment référencé par le hachage de bloc suivant</span> 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f. Un bloc peut ainsi être identifié de deux manières : en référençant le hachage du bloc ou en référençant la hauteur du bloc. Chaque bloc suivant ajouté &quot;au-dessus&quot; de ce premier bloc est une position &quot;plus élevée&quot; dans la chaîne de blocs, comme des boîtes empilées les unes sur les autres.</p>
</div>
<div class="paragraph data-line-62">
<p>De plus, le terme <em>hauteur de bloc actuelle</em> indique la taille de la chaîne de blocs en blocs à un moment donné. Par exemple, la hauteur actuelle du bloc au 1er mars 2021 était d&#8217;environ 672 722, ce qui signifie qu&#8217;il y avait 672 722 blocs empilés au-dessus du premier bloc créé en janvier 2009.</p>
</div>
<div class="paragraph data-line-64">
<p>Contrairement au hachage de bloc, la hauteur de bloc n&#8217;est pas un identifiant unique. Bien qu&#8217;un seul bloc ait toujours une hauteur de bloc spécifique et invariante, l&#8217;inverse n&#8217;est pas vrai : la hauteur de bloc n&#8217;identifie pas toujours un seul bloc. Deux ou plusieurs blocs peuvent avoir la même hauteur de bloc, en concurrence pour la même position dans la chaîne de blocs. Ce scénario est décrit en détail dans la section <a href="#forks">[forks]</a>. La hauteur de bloc ne fait pas non plus partie de la structure de données du bloc ; il n&#8217;est pas stocké dans le bloc. Chaque nœud identifie dynamiquement la position (hauteur) d&#8217;un bloc dans la chaîne de blocs lorsqu&#8217;il est reçu du réseau Bitcoin. La hauteur de bloc peut également être stockée sous forme de métadonnées dans une table de base de données indexée pour une récupération plus rapide.</p>
</div>
<div class="admonitionblock tip data-line-67">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph data-line-68">
<p>Le <em>hachage de bloc</em> d&#8217;un bloc identifie toujours un seul bloc de manière unique. Un bloc a également toujours une <em>hauteur de bloc</em> spécifique. Cependant, il n&#8217;est pas toujours vrai qu&#8217;une hauteur de bloc spécifique puisse identifier un seul bloc. Au contraire, deux blocs ou plus pourraient se disputer une seule position dans la chaîne de blocs.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2 data-line-71">
<h3 id="_le_bloc_dorigine_ou_de_genèse">Le bloc d&#8217;origine (ou de genèse)</h3>
<div class="paragraph data-line-73">
<p> Le premier bloc de la chaîne de blocs est appelé le bloc d&#8217;origine (ou de genèse) et a été créé en 2009. Il est l&#8217;ancêtre commun de tous les blocs de la chaîne de blocs, ce qui signifie que si vous commencez à n&#8217;importe quel bloc et suivez la chaîne en arrière dans le temps, vous finirez par arriver au bloc de genèse.</p>
</div>
<div class="paragraph data-line-75">
<p>Chaque nœud commence toujours par une chaîne de blocs d&#8217;au moins un bloc car le bloc de genèse est encodé de manière statique dans le logiciel client Bitcoin, de sorte qu&#8217;il ne peut pas être modifié. Chaque nœud &quot;connaît&quot; toujours le hachage et la structure du bloc de genèse, l&#8217;heure fixe à laquelle il a été créé et même la transaction unique qu&#8217;il contient. Ainsi, chaque nœud a le point de départ de la chaîne de blocs, une &quot;racine&quot; sécurisée à partir de laquelle construire une chaîne de blocs de confiance.</p>
</div>
<div class="paragraph data-line-77">
<p>Voir le bloc de genèse encodé statiquement à l&#8217;intérieur du client Bitcoin Core, dans <a href="https://bit.ly/1x6rcwP" data-href="https://bit.ly/1x6rcwP"><em>chainparams.cpp</em></a>.</p>
</div>
<div class="paragraph data-line-79">
<p>Le hachage d&#8217;identifiant suivant appartient au bloc genesis :</p>
</div>
<div class="listingblock data-line-81">
<div class="content">
<pre>000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f</pre>
</div>
</div>
<div class="paragraph data-line-85">
<p>Vous pouvez rechercher ce hachage de bloc sur n&#8217;importe quel site web d&#8217;explorateur de blocs, tel que <em>Blockchain.com</em>, et vous trouverez une page décrivant le contenu de ce bloc, avec une URL contenant ce hachage :</p>
</div>
<div class="paragraph data-line-87">
<p><a href="https://www.blockchain.com/btc/block/000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f" class="undefined" data-href="https://www.blockchain.com/btc/block/000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f">https://www.blockchain.com/btc/block/000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f</a></p>
</div>
<div class="paragraph data-line-89">
<p>Utilisation du client de référence Bitcoin Core sur la ligne de commande :</p>
</div>
<div class="listingblock data-line-91">
<div class="content">
<pre>$ bitcoin-cli getblock 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f</pre>
</div>
</div>
<div class="listingblock data-line-95">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "hash" : "000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",
    "confirmations" : 308321,
    "size" : 285,
    "height" : 0,
    "version" : 1,
    "merkleroot" : "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
    "tx" : [
        "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b"
    ],
    "time" : 1231006505,
    "nonce" : 2083236893,
    "bits" : "1d00ffff",
    "difficulty" : 1.00000000,
    "nextblockhash" : "00000000839a8e6886ab5951d76f411475428afc90947ee320161bbf18eb6048"
}</code></pre>
</div>
</div>
<div class="paragraph data-line-114">
<p>Le bloc de genèse contient un message caché en son sein. L&#8217;entrée de transaction coinbase contient le texte "The Times 03/Jan/2009 Chancellor on brink of second bailout for banks.". Ce message était destiné à offrir une preuve de la date la plus ancienne de création de ce bloc, en faisant référence au titre du journal britannique <em>The Times</em>. Il sert également de rappel ironique de l&#8217;importance d&#8217;un système monétaire indépendant, le lancement du bitcoin se produisant en même temps qu&#8217;une crise monétaire mondiale sans précédent. Le message a été intégré dans le premier bloc par Satoshi Nakamoto, le créateur de Bitcoin.</p>
</div>
</div>
<div class="sect2 data-line-116">
<h3 id="_relier_les_blocs_dans_la_chaîne_de_blocs">Relier les blocs dans la chaîne de blocs</h3>
<div class="paragraph data-line-118">
<p>Les nœuds complets Bitcoin conservent une copie locale de la chaîne de blocs, à partir du bloc de genèse. La copie locale de la chaîne de blocs est constamment mise à jour au fur et à mesure que de nouveaux blocs sont trouvés et utilisés pour étendre la chaîne. Lorsqu&#8217;un nœud reçoit des blocs entrants du réseau, il validera ces blocs, puis les reliera à la chaîne de blocs existante. Pour établir un lien, un nœud examinera l&#8217;en-tête de bloc entrant et recherchera le &quot;hachage de bloc précédent&quot;.</p>
</div>
<div class="paragraph data-line-120">
<p>Supposons, par exemple, qu&#8217;un nœud ait 277 314 blocs dans la copie locale de la chaîne de blocs. Le dernier bloc dont le nœud a connaissance est le bloc 277 314, avec un hachage d&#8217;en-tête de bloc :</p>
</div>
<div class="listingblock data-line-122">
<div class="content">
<pre>00000000000000027e7ba6fe7bad39faf3b5a83daed765f05f7d1b71a1632249</pre>
</div>
</div>
<div class="paragraph data-line-126">
<p>Le nœud Bitcoin reçoit alors un nouveau bloc du réseau, qu&#8217;il analyse comme suit :</p>
</div>
<div class="listingblock data-line-129">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "size" : 43560,
    "version" : 2,
    "previousblockhash" :
        "00000000000000027e7ba6fe7bad39faf3b5a83daed765f05f7d1b71a1632249",
    "merkleroot" :
        "5e049f4030e0ab2debb92378f53c0a6e09548aea083f3ab25e1d94ea1155e29d",
    "time" : 1388185038,
    "difficulty" : 1180923195.25802612,
    "nonce" : 4215469401,
    "tx" : [
        "257e7497fb8bc68421eb2c7b699dbab234831600e7352f0d9e6522c7cf3f6c77",

 #[... beaucoup plus de transactions omises ...]

        "05cfd38f6ae6aa83674cc99e4d75a1458c165b7ab84725eda41d018a09176634"
    ]
}</code></pre>
</div>
</div>
<div class="paragraph data-line-150">
<p>En regardant ce nouveau bloc, le nœud trouve le champ previousblockhash, qui contient le hachage de son bloc parent. Il s&#8217;agit d&#8217;un hachage connu du nœud, celui du dernier bloc de la chaîne à la hauteur 277,314. Par conséquent, ce nouveau bloc est un enfant du dernier bloc de la chaîne et étend la chaîne de blocs existante. Le nœud ajoute ce nouveau bloc à la fin de la chaîne, rendant la chaîne de blocs plus longue avec une nouvelle hauteur de 277 315. <a href="#chain_of_blocks">Blocs liés dans une chaîne par référence au hachage d&#8217;en-tête de bloc précédent</a> montre la chaîne de trois blocs, liés par des références dans le champ previousblockhash.</p>
</div>
</div>
<div class="sect2 data-line-154">
<h3 id="merkle_trees">Arbres de Merkle</h3>
<div class="paragraph data-line-156">
<p>Chaque bloc de la chaîne de blocs Bitcoin contient un résumé de tous les transactions dans le bloc à l&#8217;aide d&#8217;un <em>arbre de Merkle</em>.</p>
</div>
<div class="paragraph data-line-158">
<p>Un <em>arbre de Merkle</em>, également appelé <em>arbre de hachage binaire</em>, est une structure de données utilisée pour résumer et vérifier efficacement l&#8217;intégrité de grands ensembles de données. Les arbres de Merkle sont des arbres binaires contenant des hachages cryptographiques. Le terme &quot;arbre&quot; est utilisé en informatique pour décrire une structure de données ramifiée, mais ces arbres sont généralement affichés à l&#8217;envers avec la &quot;racine&quot; en haut et les &quot;feuilles&quot; en bas d&#8217;un diagramme, comme vous le verrez dans les exemples qui suivent.</p>
</div>
<div id="chain_of_blocks" class="imageblock smallerfourtyfive data-line-163">
<div class="content">
<img src="images/mbc2_0901.png" alt="mbc2 0901">
</div>
<div class="title">Figure 1. Blocs liés dans une chaîne par référence au hachage d&#8217;en-tête de bloc précédent</div>
</div>
<div class="paragraph data-line-165">
<p>Les arbres de Merkle sont utilisés dans Bitcoin pour résumer toutes les transactions d&#8217;un bloc, produisant une empreinte numérique globale de l&#8217;ensemble des transactions, fournissant un processus très efficace pour vérifier si une transaction est incluse dans un bloc. Un arbre Merkle est construit en hachant récursivement des paires de nœuds jusqu&#8217;à ce qu&#8217;il n&#8217;y ait qu&#8217;un seul hachage, appelé <em>racine</em>, ou <em>racine de Merkle</em>. L&#8217;algorithme de hachage cryptographique utilisé dans les arbres de Merkle de Bitcoin est SHA256 appliqué deux fois, également connu sous le nom de double-SHA256.</p>
</div>
<div class="paragraph data-line-167">
<p>Lorsque N éléments de données sont hachés et résumés dans un arbre de Merkle, vous pouvez vérifier si un élément de données est inclus dans l&#8217;arbre avec au plus 2*log~2~(N) calculs, ce qui en fait une donnée très efficace structure.</p>
</div>
<div class="paragraph data-line-169">
<p>L&#8217;arbre de Merkle est construit de bas en haut. Dans l&#8217;exemple suivant, nous commençons avec quatre transactions, A, B, C et D, qui forment les <em>feuilles</em> de l&#8217;arbre de Merkle, comme indiqué dans <a href="#simple_merkle">Calcul des nœuds dans un arbre de Merkle</a>. Les transactions ne sont pas stockées dans l&#8217;arborescence de Merkle ; à la place, leurs données sont hachées et le hachage résultant est stocké dans chaque nœud feuille sous la forme H<sub>A</sub>, H<sub>B</sub>, H<sub>C</sub> et H<sub>D</sub> :</p>
</div>
<pre data-type="codelisting">
H<sub>A</sub> = SHA256(SHA256(Transaction A))
</pre>
<div class="paragraph data-line-177">
<p>Des paires consécutives de nœuds feuilles sont ensuite résumées dans un nœud parent, en concaténant les deux hachages et en les hachant ensemble. Par exemple, pour construire le nœud parent H<sub>AB</sub>, les deux hachages de 32 octets des enfants sont concaténés pour créer une chaîne de 64 octets. Cette chaîne est ensuite doublement hachée pour produire le hachage du nœud parent :</p>
</div>
<pre data-type="codelisting">
H<sub>AB</sub> = SHA256(SHA256(H<sub>A</sub> + H<sub>B</sub>))
</pre>
<div class="paragraph data-line-185">
<p>Le processus se poursuit jusqu&#8217;à ce qu&#8217;il n&#8217;y ait qu&#8217;un seul nœud au sommet, le nœud connu sous le nom de racine de Merkle. Ce hachage de 32 octets est stocké dans l&#8217;en-tête du bloc et résume toutes les données des quatre transactions. &lt;&lt;simple_merkle&gt; &gt; montre comment la racine est calculée par hachages par paires des nœuds.</p>
</div>
<div id="simple_merkle" class="imageblock data-line-189">
<div class="content">
<img src="images/mbc2_0902.png" alt="Arbre de Merkle">
</div>
<div class="title">Figure 2. Calcul des nœuds dans un arbre de Merkle</div>
</div>
<div class="paragraph data-line-191">
<p>Parce que l&#8217;arbre de Merkle est un arbre binaire, il a besoin d&#8217;un nombre pair de nœuds feuilles. S&#8217;il y a un nombre impair de transactions à résumer, le dernier hachage de transaction sera dupliqué pour créer un nombre pair de nœuds feuilles, également appelés <em>arbre équilibré</em>. Ceci est montré dans <a href="#merkle_tree_odd">La duplication d&#8217;un élément de données permet d&#8217;obtenir un nombre pair d&#8217;éléments de données</a>, où la transaction C est dupliquée.</p>
</div>
<div id="merkle_tree_odd" class="imageblock data-line-195">
<div class="content">
<img src="images/mbc2_0903.png" alt="Arbre de Merkle impair">
</div>
<div class="title">Figure 3. La duplication d&#8217;un élément de données permet d&#8217;obtenir un nombre pair d&#8217;éléments de données</div>
</div>
<div class="paragraph data-line-197">
<p>La même méthode de construction d&#8217;un arbre à partir de quatre transactions peut être généralisée pour construire des arbres de n&#8217;importe quelle taille. Dans le Bitcoin, il est courant d&#8217;avoir plusieurs centaines à plus d&#8217;un millier de transactions dans un seul bloc, qui sont résumées exactement de la même manière, produisant seulement 32 octets de données en tant que racine de Merkle unique. Dans <a href="#merkle_tree_large">Un arbre Merkle résumant de nombreux éléments de données</a>, vous verrez un arbre construit à partir de 16 transactions. Notez que bien que la racine semble plus grande que les nœuds feuilles dans le diagramme, elle a exactement la même taille, seulement 32 octets. Qu&#8217;il y ait une transaction ou cent mille transactions dans le bloc, la racine de Merkle les résume toujours en 32 octets.</p>
</div>
<div class="paragraph data-line-199">
<p>Pour prouver qu&#8217;une transaction spécifique est incluse dans un bloc, un nœud n&#8217;a besoin que de produire log~2~(N) hachages de 32 octets, constituant un <em>chemin d&#8217;authentification</em> ou <em>chemin de Merkle</em> se connectant la transaction spécifique à la racine de l&#8217;arborescence. Ceci est particulièrement important lorsque le nombre de transactions augmente, car le logarithme en base 2 du nombre de transactions augmente beaucoup plus lentement. Cela permet aux nœuds Bitcoin de produire efficacement des chemins de 10 ou 12 hachages (320 à 384 octets), qui peuvent fournir la preuve d&#8217;une seule transaction parmi plus de mille transactions dans un bloc de la taille d&#8217;un mégaoctet.</p>
</div>
<div id="merkle_tree_large" class="imageblock data-line-203">
<div class="content">
<img src="images/mbc2_0904.png" alt="Grand arbre de Merkle">
</div>
<div class="title">Figure 4. Un arbre Merkle résumant de nombreux éléments de données</div>
</div>
<div class="paragraph data-line-205">
<p>Dans <a href="#merkle_tree_path">Un chemin (ou trajet) de Merkle utilisé pour prouver l&#8217;inclusion d&#8217;un élément de données</a>, un nœud peut prouver qu&#8217;une transaction K est incluse dans le bloc en produisant un chemin de Merkle qui ne fait que quatre hachages de 32 octets (128 octets au total). Le chemin se compose des quatre hachages (affichés avec un arrière-plan ombré dans <a href="#merkle_tree_path">Un chemin (ou trajet) de Merkle utilisé pour prouver l&#8217;inclusion d&#8217;un élément de données</a>) H<sub>L</sub>, H<sub>IJ</sub>, H<sub>MNOP</sub> et H<sub>ABCDEFGH</sub>. Avec ces quatre hachages fournis comme chemin d&#8217;authentification, n&#8217;importe quel nœud peut prouver que H<sub>K</sub> (avec un fond noir au bas du diagramme) est inclus dans la racine de Merkle en calculant quatre hachages supplémentaires par paires H<sub>KL</sub>, H<sub>IJKL</sub>, H<sub>IJKLMNOP</sub> et la racine de l&#8217;arbre de Merkle (indiquée par une ligne pointillée dans le diagramme).</p>
</div>
<div id="merkle_tree_path" class="imageblock data-line-209">
<div class="content">
<img src="images/mbc2_0905.png" alt="Chemin d&#8217;arbre de Merkle">
</div>
<div class="title">Figure 5. Un chemin (ou trajet) de Merkle utilisé pour prouver l&#8217;inclusion d&#8217;un élément de données</div>
</div>
<div class="paragraph data-line-212">
<p>Le code dans <a href="#merkle_example">Construire un arbre de Merkle</a> illustre le processus de création d&#8217;un arbre de Merkle depuis les hachages de nœud feuille jusqu&#8217;à la racine, en utilisant la bibliothèque libbitcoin pour certaines fonctions d&#8217;assistance.</p>
</div>
<div id="merkle_example" class="exampleblock pagebreak-before data-line-217">
<div class="title">Example 1. Construire un arbre de Merkle</div>
<div class="content">
<div class="listingblock data-line-219">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">#include &lt;bitcoin/bitcoin.hpp&gt;

bc::hash_digest create_merkle(bc::hash_list&amp; merkle)
{
    // Stop if hash list is empty.
    if (merkle.empty())
        return bc::null_hash;
    else if (merkle.size() == 1)
        return merkle[0];

    // While there is more than 1 hash in the list, keep looping...
    while (merkle.size() &gt; 1)
    {
        // If number of hashes is odd, duplicate last hash in the list.
        if (merkle.size() % 2 != 0)
            merkle.push_back(merkle.back());
        // List size is now even.
        assert(merkle.size() % 2 == 0);

        // New hash list.
        bc::hash_list new_merkle;
        // Loop through hashes 2 at a time.
        for (auto it = merkle.begin(); it != merkle.end(); it += 2)
        {
            // Join both current hashes together (concatenate).
            bc::data_chunk concat_data(bc::hash_size * 2);
            auto concat = bc::serializer&lt;
                decltype(concat_data.begin())&gt;(concat_data.begin());
            concat.write_hash(*it);
            concat.write_hash(*(it + 1));
            // Hash both of the hashes.
            bc::hash_digest new_root = bc::bitcoin_hash(concat_data);
            // Add this to the new list.
            new_merkle.push_back(new_root);
        }
        // This is the new list.
        merkle = new_merkle;

        // DEBUG output -------------------------------------
        std::cout &lt;&lt; "Current merkle hash list:" &lt;&lt; std::endl;
        for (const auto&amp; hash: merkle)
            std::cout &lt;&lt; "  " &lt;&lt; bc::encode_base16(hash) &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
        // --------------------------------------------------
    }
    // Finally we end up with a single item.
    return merkle[0];
}

int main()
{
    // Replace these hashes with ones from a block to reproduce the same merkle root.
    bc::hash_list tx_hashes{{
        bc::hash_literal("0000000000000000000000000000000000000000000000000000000000000000"),
        bc::hash_literal("0000000000000000000000000000000000000000000000000000000000000011"),
        bc::hash_literal("0000000000000000000000000000000000000000000000000000000000000022"),
    }};
    const bc::hash_digest merkle_root = create_merkle(tx_hashes);
    std::cout &lt;&lt; "Result: " &lt;&lt; bc::encode_base16(merkle_root) &lt;&lt; std::endl;
    return 0;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph data-line-224">
<p><a href="#merkle_example_run">Compilation et exécution de l&#8217;exemple de code de Merkle</a> montre le résultat de la compilation et de l&#8217;exécution du code de Merkle.</p>
</div>
<div id="merkle_example_run" class="exampleblock data-line-228">
<div class="title">Example 2. Compilation et exécution de l&#8217;exemple de code de Merkle</div>
<div class="content">
<div class="listingblock data-line-230">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Compiler le code merkle.cpp
$ g++ -o merkle merkle.cpp $(pkg-config --cflags --libs libbitcoin)
# Exécutez l'exécutable merkle
$ ./merkle
Liste de hachage Merkle actuelle :
  32650049a0418e4380db0af81788635d8b65424d397170b8499cdc28c4d27006
  30861db96905c8dc8b99398ca1cd5bd5b84ac3264a4e1b3e65afa1bcee7540c4

Liste de hachage Merkle actuelle :
  d47780c084bad3830bcdaf6eace035e4c6cbf646d103795d22104fb105014ba3

Result: d47780c084bad3830bcdaf6eace035e4c6cbf646d103795d22104fb105014ba3</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph data-line-247">
<p>L&#8217;efficacité des arbres de Merkle devient évidente à mesure que l&#8217;échelle augmente. <a href="#block_structure2">Efficacité de l&#8217;arbre de Merkle</a> montre la quantité de données qui doit être échangée sous forme de chemin de Merkle pour prouver qu&#8217;une transaction fait partie d&#8217;un bloc.</p>
</div>
<table id="block_structure2" class="tableblock frame-all grid-all stretch data-line-252">
<caption class="title">Table 3. Efficacité de l&#8217;arbre de Merkle</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nombre de transactions</th>
<th class="tableblock halign-left valign-top">Environ. taille du bloc</th>
<th class="tableblock halign-left valign-top">Taille du chemin (hachages)</th>
<th class="tableblock halign-left valign-top">Taille du chemin (octets)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 opérations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 kilo-octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 hachages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">512 opérations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 kilo-octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9 hachages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">288 octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2048 opérations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512 kilo-octets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11 hachages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">352 octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">65 535 opérations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 mégaoctets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 hachages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512 octets</p></td>
</tr>
</tbody>
</table>
<div class="paragraph data-line-260">
<p>Comme vous pouvez le voir dans le tableau, alors que la taille de bloc augmente rapidement, de 4 Ko avec 16 transactions à une taille de bloc de 16 Mo pour 65 535 transactions, le chemin de Merkle requis pour prouver l&#8217;inclusion d&#8217;une transaction augmente beaucoup plus lentement, de 128 octets à seulement 512 octets. Avec les arbres de Merkle, un nœud peut télécharger uniquement les en-têtes de bloc (80 octets par bloc) et être toujours en mesure d&#8217;identifier l&#8217;inclusion d&#8217;une transaction dans un bloc en récupérant un petit chemin Merkle à partir d&#8217;un nœud complet, sans stocker ni transmettre la grande majorité des chaînes de blocs, qui peut avoir une taille de plusieurs gigaoctets. Les nœuds qui ne maintiennent pas une chaîne de blocs complète, appelés nœuds de vérification simplifiée des paiements (SPV), utilisent des chemins de Merkle pour vérifier les transactions sans télécharger des blocs complets.</p>
</div>
</div>
<div class="sect2 data-line-262">
<h3 id="_arbres_de_merkle_et_vérification_simplifiée_des_paiements_spv">Arbres de Merkle et vérification simplifiée des paiements (SPV)</h3>
<div class="paragraph data-line-264">
<p>Les arbres Merkle sont largement utilisés par les nœuds SPV. Les nœuds SPV n&#8217;ont pas toutes les transactions et ne téléchargent pas les blocs complets, juste les en-têtes de bloc. Afin de vérifier qu&#8217;une transaction est incluse dans un bloc, sans avoir à télécharger toutes les transactions du bloc, ils utilisent un chemin d&#8217;authentification, ou chemin de Merkle.</p>
</div>
<div class="paragraph data-line-266">
<p>Considérons, par exemple, un nœud SPV qui est intéressé par les paiements entrants à une adresse contenue dans son portefeuille. Le nœud SPV établira un filtre de Bloom (voir <a href="#bloom_filters">[bloom_filters]</a>) sur ses connexions à des pairs pour limiter les transactions reçues uniquement à celles contenant des adresses d&#8217;intérêt. Lorsqu&#8217;un pair voit une transaction qui correspond au filtre de Bloom, il enverra ce bloc à l&#8217;aide d&#8217;un message merkleblock. Le message merkleblock contient l&#8217;en-tête du bloc ainsi qu&#8217;un chemin de Merkle qui relie la transaction d&#8217;intérêt à la racine de Merkle dans le bloc. Le nœud SPV peut utiliser ce chemin de Merkle pour connecter la transaction au bloc et vérifier que la transaction est incluse dans le bloc. Le nœud SPV utilise également l&#8217;en-tête de bloc pour lier le bloc au reste de la chaîne de blocs. La combinaison de ces deux liens, entre la transaction et le bloc, et entre le bloc et la chaîne de blocs, prouve que la transaction est enregistrée dans la chaîne de blocs. Au total, le nœud SPV aura reçu moins d&#8217;un kilo-octet de données pour l&#8217;en-tête de bloc et le chemin de Merkle, une quantité de données plus de mille fois inférieure à un bloc complet (environ 1 mégaoctet actuellement).</p>
</div>
</div>
<div class="sect2 data-line-268">
<h3 id="_chaînes_de_blocs_de_test_de_bitcoin">Chaînes de blocs de test de Bitcoin</h3>
<div class="paragraph data-line-270">
<p>Vous pourriez être surpris d&#8217;apprendre qu&#8217;il existe plus d&#8217;une chaîne de blocs Bitcoin. La chaîne de blocs Bitcoin &quot;principale&quot;, celle créée par Satoshi Nakamoto le 3 janvier 2009, celle avec le bloc de genèse que nous avons étudié dans ce chapitre, s&#8217;appelle <em>mainnet</em>. Il existe d&#8217;autres chaînes de blocs Bitcoin qui sont utilisées à des fins de test : actuellement <em>testnet</em>, <em>segnet</em> et <em>regtest</em>. Regardons chacun à son tour.</p>
</div>
<div class="sect3 data-line-273">
<h4 id="_testnet_le_terrain_de_test_de_bitcoin">Testnet : Le terrain de test de Bitcoin</h4>
<div class="paragraph data-line-275">
<p>Testnet est le nom de la chaîne de blocs, du réseau et de la devise de test utilisés à des fins de test. Le testnet est un réseau P2P en direct complet, avec des portefeuilles, des bitcoins de test (pièces de testnet), l&#8217;exploitation minière et toutes les autres fonctionnalités du réseau principal. Il n&#8217;y a vraiment que deux différences : les pièces testnet sont censées être sans valeur et la difficulté d&#8217;extraction doit être suffisamment faible pour que n&#8217;importe qui puisse extraire des pièces testnet relativement facilement (en les gardant sans valeur).</p>
</div>
<div class="paragraph data-line-277">
<p>Tout développement logiciel destiné à une utilisation en production sur le réseau principal de Bitcoin doit d&#8217;abord être testé sur testnet avec des pièces de test. Cela protège à la fois les développeurs des pertes financières dues aux bogues et le réseau des comportements involontaires dus aux bogues.</p>
</div>
<div class="paragraph data-line-279">
<p>Garder les pièces sans valeur et l&#8217;exploitation minière facile, cependant, n&#8217;est pas facile. Malgré les appels des développeurs, certaines personnes utilisent des équipements de minage avancés (GPU et ASIC) pour miner sur testnet. Cela augmente la difficulté, rend impossible l&#8217;extraction avec un processeur et rend finalement assez difficile l&#8217;obtention de pièces de test pour que les gens commencent à les évaluer, de sorte qu&#8217;elles ne sont pas sans valeur. En conséquence, de temps en temps, le testnet doit être supprimé et redémarré à partir d&#8217;un nouveau bloc de genèse, réinitialisant la difficulté.</p>
</div>
<div class="paragraph data-line-281">
<p>Le testnet actuel s&#8217;appelle <em>testnet3</em>, la troisième itération de testnet, redémarré en février 2011 pour réinitialiser la difficulté du testnet précédent.</p>
</div>
<div class="paragraph data-line-283">
<p>Gardez à l&#8217;esprit que testnet3 est une grande chaîne de blocs, dépassant 25 Go en 2021. Il faudra environ un jour pour se synchroniser complètement et utiliser les ressources de votre ordinateur. Pas autant que le réseau principal, mais pas exactement &quot;léger&quot; non plus. Une bonne façon d&#8217;exécuter un nœud testnet est d&#8217;utiliser une image de machine virtuelle (par exemple, VirtualBox, Docker, Cloud Server, etc.) dédiée à cet effet.</p>
</div>
<div class="sect4 data-line-285">
<h5 id="_utiliser_testnet">Utiliser testnet</h5>
<div class="paragraph data-line-287">
<p>Bitcoin Core, comme presque tous les autres logiciels bitcoin, prend entièrement en charge le fonctionnement sur testnet au lieu du réseau principal. Toutes les fonctions de Bitcoin Core fonctionnent sur testnet, y compris le portefeuille, l&#8217;extraction de pièces testnet et la synchronisation d&#8217;un nœud testnet complet.</p>
</div>
<div class="paragraph data-line-289">
<p>Pour démarrer Bitcoin Core sur testnet au lieu du réseau principal, vous utilisez le commutateur testnet :</p>
</div>
<div class="listingblock data-line-291">
<div class="content">
<pre>$ bitcoind -testnet</pre>
</div>
</div>
<div class="paragraph data-line-295">
<p>Dans les journaux, vous devriez voir que bitcoind construit une nouvelle chaîne de blocs dans le sous-répertoire testnet3 du répertoire bitcoind par défaut :</p>
</div>
<div class="listingblock data-line-297">
<div class="content">
<pre>bitcoind : Utilisation du répertoire de données /home/username/.bitcoin/testnet3</pre>
</div>
</div>
<div class="paragraph data-line-301">
<p>Pour vous connecter à bitcoind, vous utilisez l&#8217;outil de ligne de commande bitcoin-cli, mais vous devez également le passer en mode testnet :</p>
</div>
<div class="listingblock data-line-303">
<div class="content">
<pre>$ bitcoin-cli -testnet getblockchaininfo
{
  "chain": "test",
  "blocks": 1088,
  "headers": 139999,
  "bestblockhash": "0000000063d29909d475a1c4ba26da64b368e56cce5d925097bf3a2084370128",
  "difficulty": 1,
  "mediantime": 1337966158,
  "verificationprogress": 0.001644065914099759,
  "chainwork": "0000000000000000000000000000000000000000000000000000044104410441",
  "pruned": false,
  "softforks": [

  [...]</pre>
</div>
</div>
<div class="paragraph data-line-320">
<p>Vous pouvez également exécuter sur testnet3 avec d&#8217;autres implémentations de nœud complet, telles que btcd (écrit en Go) et bcoin (écrit en JavaScript), pour expérimenter et apprendre dans d&#8217;autres langages et environnements de programmation.</p>
</div>
<div class="paragraph data-line-322">
<p>En 2021, testnet3 prend en charge toutes les fonctionnalités du réseau principal, y compris le témoin séparé (voir <a href="#segwit">[segwit]</a>). Par conséquent, testnet3 peut également être utilisé pour tester les fonctionnalités de témoin séparé.</p>
</div>
</div>
</div>
<div class="sect3 data-line-324">
<h4 id="_segnet_le_réseau_de_test_des_témoins_séparés">Segnet : Le réseau de test des témoins séparés</h4>
<div class="paragraph data-line-327">
<p>En 2016, un testnet à usage spécial a été lancé pour aider au développement et aux tests de Segregated Witness ou Témoin séparé (alias segwit; voir <a href="#segwit">[segwit]</a>). Cette chaîne de blocs de test s&#8217;appelle segnet et peut être rejointe en exécutant une version spéciale (branche) de Bitcoin Core.</p>
</div>
<div class="paragraph data-line-329">
<p>Depuis que segwit a été ajouté à testnet3, il n&#8217;est plus nécessaire d&#8217;utiliser segnet pour tester les fonctionnalités de segwit.</p>
</div>
<div class="paragraph data-line-331">
<p>À l&#8217;avenir, il est probable que nous verrons d&#8217;autres chaînes de blocs testnet spécialement conçues pour tester une seule fonctionnalité ou un changement architectural majeur, comme segnet.</p>
</div>
</div>
<div class="sect3 data-line-333">
<h4 id="_regtest_la_chaîne_de_blocs_locale">Regtest : La chaîne de blocs locale</h4>
<div class="paragraph data-line-335">
<p>Regtest, qui signifie &quot;Regression Testing&quot;, (ou tests de régressions) est une fonctionnalité de Bitcoin Core qui vous permet de créer une chaîne de blocs locale à des fins de test. Contrairement à testnet3, qui est une chaîne de blocs de test publique et partagée, les chaînes de blocs regtest sont destinées à être exécutées comme des systèmes fermés pour les tests locaux. Vous lancez une chaîne de blocs regtest à partir de zéro, en créant un bloc de genèse local. Vous pouvez ajouter d&#8217;autres nœuds au réseau ou l&#8217;exécuter avec un seul nœud uniquement pour tester le logiciel Bitcoin Core.</p>
</div>
<div class="paragraph data-line-337">
<p>Pour démarrer Bitcoin Core en mode regtest, vous utilisez le drapeau regtest :</p>
</div>
<div class="listingblock data-line-339">
<div class="content">
<pre>$ bitcoind -regtest</pre>
</div>
</div>
<div class="paragraph data-line-343">
<p>Tout comme avec testnet, Bitcoin Core initialisera une nouvelle chaîne de blocs sous le sous-répertoire <em>regtest</em> de votre répertoire par défaut bitcoind :</p>
</div>
<div class="listingblock data-line-345">
<div class="content">
<pre>bitcoind: Using data directory /home/username/.bitcoin/regtest</pre>
</div>
</div>
<div class="paragraph data-line-349">
<p>Pour utiliser l&#8217;outil de ligne de commande, vous devez également spécifier l&#8217;indicateur regtest. Essayons la commande getblockchaininfo pour inspecter la chaîne de blocs regtest :</p>
</div>
<div class="listingblock data-line-351">
<div class="content">
<pre>$ bitcoin-cli -regtest getblockchaininfo
{
  "chain": "regtest",
  "blocks": 0,
  "headers": 0,
  "bestblockhash": "0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206",
  "difficulty": 4.656542373906925e-10,
  "mediantime": 1296688602,
  "verificationprogress": 1,
  "chainwork": "0000000000000000000000000000000000000000000000000000000000000002",
  "pruned": false,
  [...]</pre>
</div>
</div>
<div class="paragraph data-line-366">
<p>Comme vous pouvez le voir, il n&#8217;y a pas encore de blocs. Exploitons-en quelques-uns (500 blocs) et gagnons la récompense :</p>
</div>
<div class="listingblock data-line-368">
<div class="content">
<pre>$ bitcoin-cli -regtest generate 500
[
  "7afed70259f22c2bf11e406cb12ed5c0657b6e16a6477a9f8b28e2046b5ba1ca",
  "1aca2f154a80a9863a9aac4c72047a6d3f385c4eec5441a4aafa6acaa1dada14",
  "4334ecf6fb022f30fbd764c3ee778fabbd53b4a4d1950eae8a91f1f5158ed2d1",
  "5f951d34065efeaf64e54e91d00b260294fcdfc7f05dbb5599aec84b957a7766",
  "43744b5e77c1dfece9d05ab5f0e6796ebe627303163547e69e27f55d0f2b9353",
   [...]
  "6c31585a48d4fc2b3fd25521f4515b18aefb59d0def82bd9c2185c4ecb754327"
]</pre>
</div>
</div>
<div class="paragraph data-line-381">
<p>Cela ne prendra que quelques secondes pour miner tous ces blocs, ce qui facilite certainement les tests. Si vous vérifiez le solde de votre portefeuille, vous verrez que vous avez gagné une récompense pour les 400 premiers blocs (les récompenses coinbase doivent avoir une profondeur de 100 blocs avant que vous puissiez les dépenser) :</p>
</div>
<div class="listingblock data-line-383">
<div class="content">
<pre>$ bitcoin-cli -regtest getbalance
12462.50000000</pre>
</div>
</div>
</div>
</div>
<div class="sect2 data-line-388">
<h3 id="_utiliser_des_chaînes_de_blocs_de_test_pour_le_développement">Utiliser des chaînes de blocs de test pour le développement</h3>
<div class="paragraph data-line-390">
<p>Les différentes chaînes de blocs de Bitcoin (regtest, segnet, testnet3, mainnet) offrent une gamme d&#8217;environnements de test pour le développement de bitcoin. Utilisez les chaînes de blocs de test, que vous développiez pour Bitcoin Core ou un autre client de consensus à nœud complet ; une application telle qu&#8217;un portefeuille, un échange, un site de commerce électronique ; ou même développer de nouveaux contrats intelligents et des scripts complexes.</p>
</div>
<div class="paragraph data-line-392">
<p>Vous pouvez utiliser les chaînes de blocs de test pour établir un pipeline de développement. Testez votre code localement sur un regtest au fur et à mesure que vous le développez. Une fois que vous êtes prêt à l&#8217;essayer sur un réseau public, passez à testnet pour exposer votre code à un environnement plus dynamique avec plus de diversité de code et d&#8217;applications. Enfin, une fois que vous êtes sûr que votre code fonctionne comme prévu, passez à mainnet pour le déployer en production. Au fur et à mesure que vous apportez des modifications, des améliorations, des corrections de bogues, etc., redémarrez le pipeline, en déployant d&#8217;abord chaque modification sur regtest, puis sur testnet, et enfin en production.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-03-22 06:27:41 -0400
</div>
</div>
</body>
</html>