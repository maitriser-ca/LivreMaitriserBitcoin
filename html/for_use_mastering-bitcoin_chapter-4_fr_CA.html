<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Clés et adresses</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="ch04_keys_addresses">Clés et adresses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vous avez peut-être entendu dire que le bitcoin est basé sur la <em>cryptographie</em>, qui est une branche des mathématiques largement utilisée en sécurité informatique. La cryptographie signifie "écriture secrète" en grec, mais la science de la cryptographie englobe plus que la simple écriture secrète, appelée cryptage. La cryptographie peut également être utilisée pour prouver la connaissance d&#8217;un secret sans révéler ce secret (signature numérique), ou prouver l&#8217;authenticité des données (empreinte numérique). Ces types de preuves cryptographiques sont les outils mathématiques essentiels au bitcoin et largement utilisés dans les applications bitcoin. Ironiquement, le cryptage n&#8217;est pas une partie importante du bitcoin, car ses communications et ses données de transaction ne sont pas cryptées et ne doivent être chiffrés pour protéger les fonds. Dans ce chapitre, nous présenterons une partie de la cryptographie utilisée dans le bitcoin pour contrôler la propriété des fonds, sous la forme de clés, d&#8217;adresses et de portefeuilles.</p>
</div>
<div class="sect2">
<h3 id="_présentation">Présentation</h3>
<div class="paragraph">
<p> La propriété du bitcoin est établie par le biais de <em>clés numériques</em>, <em>adresses Bitcoin</em> et <em>signatures numériques</em>. Les clés numériques ne sont pas réellement stockées dans le réseau, mais sont plutôt créées et stockées par les utilisateurs dans un fichier, ou une simple base de données, appelée <em>wallet</em>. Les clés numériques du portefeuille d&#8217;un utilisateur sont totalement indépendantes du protocole Bitcoin et peuvent être générées et gérées par le logiciel du portefeuille de l&#8217;utilisateur sans référence à la chaîne de blocs ni accès à Internet. Les clés permettent de nombreuses propriétés intéressantes du bitcoin, notamment la confiance et le contrôle décentralisés, l&#8217;attestation de propriété et le modèle de sécurité à l&#8217;épreuve de la cryptographie.</p>
</div>
<div class="paragraph">
<p>La plupart des transactions bitcoin nécessitent une signature numérique valide à inclure dans la chaîne de blocs, qui ne peut être générée qu&#8217;avec une clé secrète ; par conséquent, toute personne possédant une copie de cette clé a le contrôle du bitcoin.  La signature numérique utilisée pour dépenser des fonds est également appelée <em>témoin</em>, un terme utilisé en cryptographie. Les données témoins dans une transaction bitcoin témoignent de la véritable propriété des fonds dépensés.</p>
</div>
<div class="paragraph">
<p>Les clés sont fournies par paires constituées d&#8217;une clé privée (secrète) et une clé publique. Considérez la clé publique comme similaire à un numéro de compte bancaire et la clé privée comme similaire au code PIN secret, ou à la signature d&#8217;un chèque, qui permet de contrôler le compte. Ces clés numériques sont très rarement vues par les utilisateurs de bitcoin. Pour la plupart, ils sont stockés dans le fichier du portefeuille et gérés par le logiciel du portefeuille bitcoin.</p>
</div>
<div class="paragraph">
<p>Dans la partie paiement d&#8217;une transaction bitcoin, la clé publique du destinataire est représentée par son empreinte numérique, appelée <em>adresse Bitcoin</em>, qui est utilisée de la même manière que le nom du bénéficiaire sur un chèque (c&#8217;est-à-dire "Payer à l&#8217;ordre de") . Dans la plupart des cas, une adresse Bitcoin correspond et est générée à partir d&#8217;une clé publique. Cependant, toutes les adresses Bitcoin ne représentent pas des clés publiques ; ils peuvent également représenter d&#8217;autres bénéficiaires tels que des scripts, comme nous le verrons plus loin dans ce chapitre. De cette manière, les adresses Bitcoin font abstraction du destinataire des fonds, ce qui rend les destinations de transaction flexibles, similaires aux chèques papier : un instrument de paiement unique qui peut être utilisé pour payer les comptes des personnes, payer les comptes de l&#8217;entreprise, payer des factures ou payer en espèces. L&#8217;adresse Bitcoin est la seule représentation des clés que les utilisateurs verront régulièrement, car c&#8217;est la partie qu&#8217;ils doivent partager avec le monde.</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, nous présenterons la cryptographie et expliquerons les mathématiques utilisées dans le bitcoin. Ensuite, nous verrons comment les clés sont générées, stockées et gérées. Nous passerons en revue les différents formats de codage utilisés pour représenter les clés privées et publiques, les adresses et les adresses de script. Enfin, nous nous pencherons sur l&#8217;utilisation avancée des clés et des adresses : adresses personnalisées, multisignatures, scripts et portefeuilles papier.</p>
</div>
<div class="sect3">
<h4 id="_cryptographie_à_clé_publique_et_cryptomonnaie">Cryptographie à clé publique et cryptomonnaie</h4>
<div class="paragraph">
<p>La cryptographie à clé publique a été inventée dans les années 1970 et constitue une base mathématique pour informatique et sécurité de l&#8217;information.</p>
</div>
<div class="paragraph">
<p>Depuis l&#8217;invention de la cryptographie à clé publique, plusieurs fonctions mathématiques appropriées, telles que l&#8217;exponentiation des nombres premiers et la multiplication des courbes elliptiques, ont été découvertes. Ces fonctions mathématiques sont pratiquement irréversibles, ce qui signifie qu&#8217;elles sont faciles à calculer dans un sens et impossibles à calculer dans le sens opposé. Sur la base de ces fonctions mathématiques, la cryptographie permet la création de secrets numériques et de signatures numériques infalsifiables. Bitcoin utilise la multiplication de courbes elliptiques comme base de sa cryptographie.</p>
</div>
<div class="paragraph">
<p>En bitcoin, nous utilisons la cryptographie à clé publique pour créer une paire de clés qui contrôle l&#8217;accès au bitcoin. La paire de clés se compose d&#8217;une clé privée et - dérivée de celle-ci - d&#8217;une clé publique unique. La clé publique est utilisée pour recevoir des fonds et la clé privée est utilisée pour signer des transactions afin de dépenser les fonds.</p>
</div>
<div class="paragraph">
<p>Il existe une relation mathématique entre la clé publique et la clé privée qui permet d&#8217;utiliser la clé privée pour générer des signatures sur les messages. Ces signatures peuvent être validées par rapport à la clé publique sans révéler la clé privée.</p>
</div>
<div class="paragraph">
<p>Lorsqu&#8217;il dépense des bitcoins, le propriétaire actuel de bitcoins présente sa clé publique et une signature (différente à chaque fois, mais créée à partir de la même clé privée) dans une transaction pour dépenser ces bitcoins. Grâce à la présentation de la clé publique et de la signature, tous les membres du réseau Bitcoin peuvent vérifier et accepter la transaction comme valide, confirmant que la personne transférant le bitcoin en était propriétaire au moment du transfert.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p> Dans la plupart des implémentations de portefeuille, les clés privées et publiques sont stockées ensemble sous la forme d&#8217;une <em>paire de clés</em> pour plus de commodité. Cependant, la clé publique peut être calculée à partir de la clé privée, de sorte qu&#8217;il est également possible de ne stocker que la clé privée.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="private_public_keys">Clés privées et publiques</h4>
<div class="paragraph">
<p> Un portefeuille bitcoin contient une collection de paires de clés, chacune composée d&#8217;une clé privée et d&#8217;une clé publique. La clé privée (k) est un nombre, généralement choisi au hasard. A partir de la clé privée, nous utilisons la multiplication par courbe elliptique, une fonction cryptographique à sens unique, pour générer une clé publique (K). A partir de la clé publique (K), nous utilisons une fonction de hachage cryptographique unidirectionnelle pour générer une adresse Bitcoin (A). Dans cette section, nous commencerons par générer la clé privée, examinerons les mathématiques de la courbe elliptique utilisées pour la transformer en clé publique, et enfin, générerons une adresse Bitcoin à partir de la clé publique. La relation entre la clé privée, la clé publique et l&#8217;adresse Bitcoin est indiquée dans <a href="#k_to_K_to_A">Clé privée, clé publique et adresse Bitcoin</a>.</p>
</div>
<div id="k_to_K_to_A" class="imageblock">
<div class="content">
<img src="images/mbc2_0401.png" alt="privk à pubK à adresse A">
</div>
<div class="title">Figure 1. Clé privée, clé publique et adresse Bitcoin</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Pourquoi utiliser la cryptographie asymétrique (clés publiques/privées) ?</div>
<div class="paragraph">
<p>Pourquoi la cryptographie asymétrique est-elle utilisée dans le bitcoin ? Elle n&#8217;est pas utilisée pour "crypter" (rendre secrètes) les transactions. Au contraire, la propriété utile de la cryptographie asymétrique est la capacité à générer des <em>signatures numériques</em>. Une clé privée peut être appliquée à l&#8217;empreinte numérique d&#8217;une transaction pour produire une signature numérique. Cette signature ne peut être produite que par une personne connaissant la clé privée. Cependant, toute personne ayant accès à la clé publique et à l&#8217;empreinte digitale de la transaction peut les utiliser pour <em>vérifier</em> la signature. Cette propriété utile de la cryptographie asymétrique permet à quiconque de vérifier chaque signature sur chaque transaction, tout en garantissant que seuls les propriétaires de clés privées peuvent produire des signatures valides.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="private_keys">Clés privées</h4>
<div class="paragraph">
<p>Une clé privée est simplement un nombre, choisi au hasard . La propriété et le contrôle de la clé privée sont à la base du contrôle de l&#8217;utilisateur sur tous les fonds associés à l&#8217;adresse Bitcoin correspondante. La clé privée est utilisée pour créer des signatures nécessaires pour dépenser des bitcoins en prouvant la propriété des fonds utilisés dans une transaction. La clé privée doit rester secrète à tout moment, car la révéler à des tiers équivaut à leur donner le contrôle sur le bitcoin sécurisé par cette clé. La clé privée doit également être sauvegardée et protégée contre toute perte accidentelle, car si elle est perdue, elle ne peut pas être récupérée et les fonds qu&#8217;elle garantit sont également perdus à jamais.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La clé privée bitcoin n&#8217;est qu&#8217;un nombre. Vous pouvez choisir vos clés privées au hasard en utilisant simplement une pièce de monnaie, un crayon et du papier : lancez une pièce 256 fois et vous avez les chiffres binaires d&#8217;une clé privée aléatoire que vous pouvez utiliser dans un portefeuille bitcoin. La clé publique peut alors être générée à partir de la clé privée.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_générer_une_clé_privée_à_partir_dun_nombre_aléatoire">Générer une clé privée à partir d&#8217;un nombre aléatoire</h5>
<div class="paragraph">
<p>La première et la plus importante étape de la génération de clés consiste à trouver une source sécurisée d&#8217;entropie ou de caractère aléatoire. La création d&#8217;une clé bitcoin est essentiellement la même que "Choisissez un nombre entre 1 et 2<sup>256</sup>". La méthode exacte que vous utilisez pour choisir ce nombre n&#8217;a pas d&#8217;importance tant qu&#8217;elle n&#8217;est pas prévisible ou reproductible. Le logiciel Bitcoin utilise les générateurs de nombres aléatoires du système d&#8217;exploitation sous-jacent pour produire 256 bits d&#8217;entropie (aléatoire). Habituellement, le générateur de nombres aléatoires du système d&#8217;exploitation est initialisé par une source humaine d&#8217;aléatoire, c&#8217;est pourquoi il peut vous être demandé de remuer votre souris pendant quelques secondes.</p>
</div>
<div class="paragraph">
<p>Plus précisément, la clé privée peut être n&#8217;importe quel nombre compris entre <code>0</code> et <code>n - 1</code> inclus, où n est une constante (n = 1,1578 * 10<sup>77</sup>, légèrement inférieure à 2<sup>256</sup>) définie comme l&#8217;ordre de la courbe elliptique utilisée dans le bitcoin (voir <a href="#elliptic_curve">La cryptographie à courbe elliptique expliquée</a>). Pour créer une telle clé, nous choisissons au hasard un nombre de 256 bits et vérifions qu&#8217;il est inférieur à n. En termes de programmation, cela est généralement réalisé en alimentant une plus grande chaîne de bits aléatoires, collectés à partir d&#8217;une source aléatoire sécurisée par cryptographie, dans l&#8217;algorithme de hachage SHA256, qui produira commodément un nombre de 256 bits. Si le résultat est inférieur à n, nous avons une clé privée appropriée. Sinon, nous réessayons simplement avec un autre nombre aléatoire.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>N&#8217;écrivez pas votre propre code pour créer un nombre aléatoire ou n&#8217;utilisez pas un nombre aléatoire "simple" généré par votre langage de programmation. Utilisez un générateur de nombres pseudo-aléatoires cryptographiquement sécurisé (CSPRNG) avec une valeur d&#8217;amorçage provenant d&#8217;une source d&#8217;entropie suffisante. Étudiez la documentation de la bibliothèque de générateurs de nombres aléatoires que vous choisissez pour vous assurer qu&#8217;elle est cryptographiquement sécurisée. La mise en œuvre correcte du CSPRNG est essentielle à la sécurité des clés.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce qui suit est une clé privée générée aléatoirement (k) affichée au format hexadécimal (256 bits affichés sous la forme de 64 chiffres hexadécimaux, chacun de 4 bits) :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La taille de l&#8217;espace de clé privée de bitcoin, (2<sup>256</sup>) est un nombre insondable. Il est d&#8217;environ 10<sup>77</sup> en décimal. À titre de comparaison, on estime que l&#8217;univers visible contient 10<sup>80</sup> atomes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pour générer une nouvelle clé avec le client Bitcoin Core (voir <a href="#ch03_bitcoin_client">[ch03_bitcoin_client]</a>), utilisez la commande getnewaddress. Pour des raisons de sécurité, il affiche uniquement l&#8217;adresse, pas la clé privée. Pour demander à <code>bitcoind</code> d&#8217;exposer la clé privée, utilisez la commande dumpprivkey. La commande <code>dumpprivkey</code> affiche la clé privée dans un format de somme de contrôle Base58 appelé <em>Wallet Import Format</em> (WIF ou format d&#8217;importation de portefeuille), que nous examinerons plus en détail dans <a href="#priv_formats">Formats de clé privée</a>. Voici un exemple de génération et d&#8217;affichage d&#8217;une clé privée à l&#8217;aide de ces deux commandes :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bitcoin-cli getnewaddress
1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy
$ bitcoin-cli dumpprivkey 1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy
KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</pre>
</div>
</div>
<div class="paragraph">
<p>La commande <code>dumpprivkey</code> ouvre le portefeuille et extrait la clé privée qui a été générée par la commande getnewaddress. Il n&#8217;est pas possible pour <code>bitcoind</code> de connaître la clé privée à partir de l&#8217;adresse à moins qu&#8217;elles ne soient toutes deux stockées dans le portefeuille.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La commande <code>dumpprivkey</code> ne génère pas de clé privée à partir d&#8217;une adresse, car cela est impossible. La commande révèle simplement la clé privée qui est déjà connue du portefeuille et qui a été générée par la commande getnewaddress.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph pagebreak-before">
<p>Vous pouvez également utiliser l&#8217;outil de ligne de commande Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) pour générer et afficher des clés privées avec les commandes seed, <code>ec-new</code> et ec-to-wif :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx seed | bx ec-new | bx ec-to-wif
5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pubkey">Clés publiques</h4>
<div class="paragraph">
<p>La clé publique est calculée à partir de la clé privée en utilisant la multiplication par courbe elliptique, qui est irréversible : <em>K</em> = <em>k</em> * <em>G</em>, où <em>k</em> est la clé privée, <em>G</em> est un point constant appelé <em>point générateur</em> et <em>K</em> est la clé publique résultante. L&#8217;opération inverse, connue sous le nom de "trouver le logarithme discret" - calculer <em>k</em> si vous connaissez <em>K</em> - est aussi difficile que d&#8217;essayer toutes les valeurs possibles de <em>k</em>, c&#8217;est-à-dire par une recherche par force brute. Avant de montrer comment générer une clé publique à partir d&#8217;une clé privée, examinons un peu plus en détail la cryptographie à courbe elliptique.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La multiplication de courbe elliptique est un type de fonction que les cryptographes appellent une fonction « à sens unique » : elle est facile à faire dans un sens (multiplication) et impossible à faire dans le sens inverse (« division », ou trouver le logarithme discret). Le propriétaire de la clé privée peut facilement créer la clé publique, puis la partager avec le monde entier, sachant que personne ne peut inverser la fonction et calculer la clé privée à partir de la clé publique. Cette astuce mathématique devient la base de signatures numériques infalsifiables et sécurisées qui prouvent la propriété des fonds bitcoin.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="elliptic_curve">La cryptographie à courbe elliptique expliquée</h4>
<div class="paragraph">
<p> La cryptographie à courbe elliptique est un type de cryptographie asymétrique ou à clé publique basée sur le problème du logarithme discret exprimé par addition et multiplication sur les points d&#8217;une courbe elliptique.</p>
</div>
<div class="paragraph">
<p><a href="#ecc-curve">Une courbe elliptique</a> est un exemple de courbe elliptique, similaire à celle utilisée par le bitcoin.</p>
</div>
<div id="ecc-curve" class="imageblock smallerthirty">
<div class="content">
<img src="images/mbc2_0402.png" alt="courbe ecc">
</div>
<div class="title">Figure 2. Une courbe elliptique</div>
</div>
<div class="paragraph">
<p>Bitcoin utilise une courbe elliptique spécifique et un ensemble de constantes mathématiques, telles que définies dans une norme appelée secp256k1, établie par le National Institute of Standards and Technology (NIST). La courbe <code>secp256k1</code> est définie par la fonction suivante, qui produit une courbe elliptique :</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{y^2 = (x^3 + 7)}~\text{over}~(\mathbb{F}_p)
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>ou</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{y^2 \mod p = (x^3 + 7) \mod p}
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>Le <em>mod p</em> (modulo nombre premier p) indique que cette courbe est sur un corps fini d&#8217;ordre premier <em>p</em>, également écrit comme \(\mathbb{F}_p\), où p = 2<sup>256</sup> – 2<sup>32</sup> – 2<sup>9</sup> – 2<sup>8</sup> – 2<sup>7</sup> – 2<sup>6</sup> – 2<sup>4</sup> – 1, un très grand nombre premier.</p>
</div>
<div class="paragraph">
<p>Parce que cette courbe est définie sur un champ fini d&#8217;ordre premier au lieu de sur les nombres réels, elle ressemble à un motif de points dispersés en deux dimensions, ce qui la rend difficile à visualiser. Cependant, le calcul est identique à celui d&#8217;une courbe elliptique sur des nombres réels. A titre d&#8217;exemple, <a href="#ecc-over-F17-math">Cryptographie sur courbe elliptique : visualisation d&#8217;une courbe elliptique sur F(p), avec p=17</a> montre la même courbe elliptique sur un champ fini beaucoup plus petit d&#8217;ordre premier 17, montrant un motif de points sur une grille. La courbe elliptique du bitcoin <code>secp256k1</code> peut être considérée comme un motif beaucoup plus complexe de points sur une grille insondable.</p>
</div>
<div id="ecc-over-F17-math" class="imageblock smallersixty">
<div class="content">
<img src="images/mbc2_0403.png" alt="ecc sur mathématiques F17">
</div>
<div class="title">Figure 3. Cryptographie sur courbe elliptique : visualisation d&#8217;une courbe elliptique sur F(p), avec p=17</div>
</div>
<div class="paragraph">
<p>Ainsi, par exemple, ce qui suit est un point P de coordonnées (x,y) qui est un point sur la courbe secp256k1 :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>P = (55066263022277343669578718895168534326250603453777594175500187360389116729240, 32670510020758816978083085130507043184471273380659243275938904335757337482424)</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#example_4_1">Utiliser Python pour confirmer que ce point est sur la courbe elliptique</a> montre comment vous pouvez vérifier cela vous-même en utilisant Python :</p>
</div>
<div id="example_4_1" class="exampleblock">
<div class="title">Example 1. Utiliser Python pour confirmer que ce point est sur la courbe elliptique</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-pycon" data-lang="pycon">Python 3.4.0 (default, Mar 30 2014, 19:23:13)
[GCC 4.2.1 Compatible Apple LLVM 5.1 (clang-503.0.38)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; p = 115792089237316195423570985008687907853269984665640564039457584007908834671663
&gt;&gt;&gt; x = 55066263022277343669578718895168534326250603453777594175500187360389116729240
&gt;&gt;&gt; y = 32670510020758816978083085130507043184471273380659243275938904335757337482424
&gt;&gt;&gt; (x ** 3 + 7 - y**2) % p
0</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Dans les mathématiques des courbes elliptiques, il existe un point appelé le "point à l&#8217;infini", qui correspond à peu près au rôle de zéro. Sur les ordinateurs, il est parfois représenté par x = y = 0 (ce qui ne satisfait pas l&#8217;équation de la courbe elliptique, mais c&#8217;est un cas séparé facile qui peut être vérifié).</p>
</div>
<div class="paragraph">
<p>Il existe également un opérateur +, appelé "addition", qui possède certaines propriétés similaires à l&#8217;addition traditionnelle de nombres réels apprise par les élèves du primaire. Étant donné deux points P<sub>1</sub> et P<sub>2</sub> sur la courbe elliptique, il existe un troisième point P<sub>3</sub> = P<sub>1</sub> + P<sub>2</sub>, également sur la courbe elliptique.</p>
</div>
<div class="paragraph">
<p>Géométriquement, ce troisième point P<sub>3</sub> est calculé en traçant une ligne entre P<sub>1</sub> et P<sub>2</sub>. Cette ligne coupera la courbe elliptique exactement à un endroit supplémentaire. Appelons ce point P<sub>3</sub> = (x, y). Renvoyé ensuite sur l&#8217;axe des x pour obtenir P<sub>3</sub> = (x, –y).</p>
</div>
<div class="paragraph">
<p>Il y a quelques cas particuliers qui expliquent la nécessité du "point à l&#8217;infini".</p>
</div>
<div class="paragraph">
<p>Si P<sub>1</sub> et P<sub>2</sub> sont le même point, la ligne "entre" P<sub>1</sub> et P<sub>2</sub> doit s&#8217;étendre pour être la tangente sur la courbe en ce point P<sub>1</sub>. Cette tangente coupera la courbe en exactement un nouveau point. Vous pouvez utiliser des techniques de calcul pour déterminer la pente de la ligne tangente. Ces techniques fonctionnent curieusement, même si nous restreignons notre intérêt aux points de la courbe à deux coordonnées entières !</p>
</div>
<div class="paragraph">
<p>Dans certains cas (par exemple, si P<sub>1</sub> et P<sub>2</sub> ont les mêmes valeurs x mais des valeurs y différentes), la ligne entre P<sub>1</sub> et P<sub>2</sub> sera exactement verticale, auquel cas P<sub>3</sub> = "point à l&#8217;infini."</p>
</div>
<div class="paragraph">
<p>Si P<sub>1</sub> est le "point à l&#8217;infini", alors P<sub>1</sub> ` P<sub>2</sub> = P<sub>2</sub>. De même, si P<sub>2</sub> est le point à l&#8217;infini, alors P<sub>1</sub> ` P<sub>2</sub> = P<sub>1</sub>. Cela montre comment le point à l&#8217;infini joue le rôle de zéro.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;avère que + est associatif, ce qui signifie que (A + B) + C = A + (B + C). Cela signifie que nous pouvons écrire A + B + C sans parenthèses et sans ambiguïté.</p>
</div>
<div class="paragraph">
<p>Maintenant que nous avons défini l&#8217;addition, nous pouvons définir la multiplication de la manière standard qui extensionne l&#8217;addition. Pour un point P sur la courbe elliptique, si k est un nombre entier, alors kP = P ` P ` P ` &#8230;&#8203; ` P (k fois). Notez que k est parfois appelé un "exposant" dans ce cas.</p>
</div>
</div>
<div class="sect3">
<h4 id="public_key_derivation">Génération d&#8217;une clé publique</h4>
<div class="paragraph">
<p>En partant d&#8217;une clé privée sous la forme d&#8217;un nombre généré aléatoirement <em>k</em>, nous la multiplions par un point prédéterminé sur la courbe appelé <em>point générateur</em> <em>G</em> pour produire un autre point ailleurs sur la courbe, qui est la clé publique correspondante <em>K</em>. Le point générateur est spécifié dans le cadre de la norme <code>secp256k1</code> et est toujours le même pour toutes les clés en bitcoin :</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{K = k * G}
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>où <em>k</em> est la clé privée, <em>G</em> est le point générateur et <em>K</em> est la clé publique résultante, un point sur la courbe. Comme le point générateur est toujours le même pour tous les utilisateurs de bitcoins, une clé privée <em>k</em> multipliée par <em>G</em> donnera toujours la même clé publique <em>K</em>. La relation entre <em>k</em> et <em>K</em> est fixe, mais ne peut être calculée que dans un sens, de <em>k</em> vers <em>K</em>. C&#8217;est pourquoi une adresse Bitcoin (dérivée de <em>K</em>) peut être partagée avec n&#8217;importe qui et ne révèle pas la clé privée de l&#8217;utilisateur (<em>k</em>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Une clé privée peut être convertie en clé publique, mais une clé publique ne peut pas être reconvertie en clé privée car le calcul ne fonctionne que dans un sens.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En implémentant la multiplication par courbe elliptique, nous prenons la clé privée <em>k</em> générée précédemment et la multiplions avec le point générateur G pour trouver la clé publique <em>K</em> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = 1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD * G</pre>
</div>
</div>
<div class="paragraph">
<p>La clé publique <em>K</em> est définie comme un point K = (x,y) :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = (x, y)

où,

x = F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A
y = 07CF33DA18BD734C600B96A72BBC4749D5141C90EC8AC328AE52DDFE2E505BDB</pre>
</div>
</div>
<div class="paragraph">
<p>Pour visualiser la multiplication d&#8217;un point avec un nombre entier, nous utiliserons la courbe elliptique plus simple sur des nombres réels - rappelez-vous, le calcul est le même. Notre objectif est de trouver le multiple <em>kG</em> du point générateur <em>G</em>, ce qui revient à ajouter <em>G</em> à lui-même, <em>k</em> fois de suite. Dans les courbes elliptiques, l&#8217;ajout d&#8217;un point à lui-même équivaut à tracer une ligne tangente sur le point et à trouver à nouveau l&#8217;endroit où il coupe la courbe, puis à refléter ce point sur l&#8217;axe des x.</p>
</div>
<div class="paragraph">
<p><a href="#ecc_illustrated">Cryptographie sur courbe elliptique : visualisation de la multiplication d&#8217;un point G par un entier k sur une courbe elliptique</a> montre le processus de dérivation de <em>G</em>, <em>2G</em>, <em>4G</em> et <em>8G</em> en tant qu&#8217;opération géométrique sur la courbe.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Bitcoin utilise la <a href="https://github.com/bitcoin-core/secp256k1">bibliothèque C optimisée secp256k1</a> pour effectuer les calculs de la courbe elliptique.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="ecc_illustrated" class="imageblock">
<div class="content">
<img src="images/mbc2_0404.png" alt="illustration d&#8217;ecc">
</div>
<div class="title">Figure 4. Cryptographie sur courbe elliptique : visualisation de la multiplication d&#8217;un point G par un entier k sur une courbe elliptique</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adresses_bitcoin">Adresses Bitcoin</h3>
<div class="paragraph">
<p>Une adresse Bitcoin est une chaîne de chiffres et de caractères qui peut être partagée avec toute personne souhaitant vous envoyer de l&#8217;argent. Les adresses produites à partir de clés publiques consistent en une chaîne de chiffres et de lettres commençant par le chiffre "1". Voici un exemple d&#8217;adresse Bitcoin :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy</pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;adresse Bitcoin est ce qui apparaît le plus souvent dans une transaction en tant que "destinataire" des fonds. Si nous comparons une transaction bitcoin à un chèque papier, l&#8217;adresse Bitcoin est le bénéficiaire, c&#8217;est ce que nous écrivons sur la ligne après "Payer à l&#8217;ordre de". Sur un chèque papier, ce bénéficiaire peut parfois être le nom d&#8217;un titulaire de compte bancaire, mais peut également inclure des sociétés, des institutions ou même des espèces. Étant donné que les chèques papier n&#8217;ont pas besoin de spécifier un compte, mais utilisent plutôt un nom abstrait en tant que destinataire des fonds, ce sont des instruments de paiement très flexibles. Les transactions Bitcoin utilisent une abstraction similaire, l&#8217;adresse Bitcoin, pour les rendre très flexibles. Une adresse Bitcoin peut représenter le propriétaire d&#8217;une paire de clés privée/publique, ou elle peut représenter autre chose, comme un script de paiement, comme nous le verrons dans <a href="#p2sh">[p2sh]</a>. Pour l&#8217;instant, examinons le cas simple; une adresse Bitcoin qui représente et est dérivée d&#8217;une clé publique.</p>
</div>
<div class="paragraph">
<p>L&#8217;adresse Bitcoin est dérivée de la clé publique grâce à l&#8217;utilisation d&#8217;un hachage cryptographique unidirectionnel. Un "algorithme de hachage" ou simplement "algorithme de hachage" est une fonction à sens unique qui produit une empreinte digitale ou un "hachage" (ou un "résultat de hachage") d&#8217;une entrée de taille arbitraire. Les fonctions de hachage cryptographiques sont largement utilisées dans le bitcoin : dans les adresses Bitcoin, dans les adresses de script et dans l&#8217;algorithme de minage de preuve de travail. Les algorithmes utilisés pour créer une adresse Bitcoin à partir d&#8217;une clé publique sont le Secure Hash Algorithm (SHA) et le RACE Integrity Primitives Evaluation Message Digest (RIPEMD), ou plus précisément SHA256 et RIPEMD160.</p>
</div>
<div class="paragraph">
<p>En commençant par la clé publique <em>K</em>, nous calculons le hachage SHA256, puis calculons le hachage RIPEMD160 du résultat, produisant un nombre de 160 bits (20 octets) :</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{A = RIPEMD160(SHA256(K))}
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>où <em>K</em> est la clé publique et <em>A</em> est l&#8217;adresse Bitcoin résultante.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Une adresse Bitcoin n&#8217;est <em>pas</em> la même chose qu&#8217;une clé publique. Les adresses Bitcoin sont dérivées d&#8217;une clé publique à l&#8217;aide d&#8217;une fonction unidirectionnelle.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les adresses Bitcoin sont presque toujours encodées en "Base58Check" (voir <a href="#base58">Encodage Base58 et Base58Check</a>), qui utilise 58 caractères (un système de numérotation Base58) et une somme de contrôle pour faciliter la lisibilité humaine, éviter toute ambiguïté et protéger contre les erreurs de transcription et de saisie d&#8217;adresse. Base58Check est également utilisé de nombreuses autres manières dans Bitcoin, par exemple lorsque chaque fois qu&#8217;un utilisateur a besoin de lire et de transcrire correctement un numéro, tel qu&#8217;une adresse Bitcoin, une clé privée, une clé cryptée ou un hachage de script. Dans la section suivante, nous examinerons les mécanismes d&#8217;encodage et de décodage Base58Check et les représentations qui en résultent. <a href="#pubkey_to_address">Clé publique vers adresse Bitcoin : conversion d&#8217;une clé publique en adresse Bitcoin</a> illustre la conversion d&#8217;une clé publique en une adresse Bitcoin.</p>
</div>
<div id="pubkey_to_address" class="imageblock">
<div class="content">
<img src="images/mbc2_0405.png" alt="pubkey à adresse">
</div>
<div class="title">Figure 5. Clé publique vers adresse Bitcoin : conversion d&#8217;une clé publique en adresse Bitcoin</div>
</div>
<div class="sect3">
<h4 id="base58">Encodage Base58 et Base58Check</h4>
<div class="paragraph">
<p>Afin de représenter les nombres longs de manière compacte, en utilisant moins de symboles, de nombreux systèmes informatiques utilisent des représentations alphanumériques mixtes avec une base supérieure à 10. Par exemple, alors que le système décimal traditionnel utilise les 10 chiffres de 0 à 9, le système hexadécimal utilise 16, avec les lettres A à F comme six symboles supplémentaires. Un nombre représenté au format hexadécimal est plus court que la représentation décimale équivalente. Encore plus compacte, la représentation Base64 utilise 26 lettres minuscules, 26 lettres majuscules, 10 chiffres et 2 caractères supplémentaires tels que &#8220;+&#8221; et "/" pour transmettre des données binaires sur des supports textuels tels que le courrier électronique. Base64 est le plus couramment utilisé pour ajouter des pièces jointes binaires aux e-mails. Base58 est un format de codage binaire basé sur du texte développé pour être utilisé dans le bitcoin et utilisé dans de nombreuses autres cryptomonnaies. Il offre un équilibre entre représentation compacte, lisibilité et détection et prévention des erreurs. Base58 est un sous-ensemble de Base64, utilisant des lettres et des chiffres majuscules et minuscules, mais omettant certains caractères qui sont fréquemment confondus et qui peuvent apparaître identiques lorsqu&#8217;ils sont affichés dans certaines polices. Plus précisément, Base58 est Base64 sans le 0 (chiffre zéro), O (o majuscule), l (L inférieur), I (i majuscule) et les symboles &#8220;+&#8221; et "/". Ou, plus simplement, c&#8217;est un ensemble de lettres minuscules et majuscules et de chiffres sans les quatre (0, O, l, I) que nous venons de mentionner. <a href="#base58alphabet">Alphabet Base58 de Bitcoin</a> affiche l&#8217;alphabet Base58 complet.</p>
</div>
<div id="base58alphabet" class="exampleblock">
<div class="title">Example 2. Alphabet Base58 de Bitcoin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Pour ajouter une sécurité supplémentaire contre les fautes de frappe ou les erreurs de transcription, Base58Check est un format d&#8217;encodage Base58, fréquemment utilisé dans le bitcoin, qui possède un code de vérification des erreurs intégré. La somme de contrôle est constituée de quatre octets supplémentaires ajoutés à la fin des données en cours de codage. La somme de contrôle est dérivée du hachage des données codées et peut donc être utilisée pour détecter et prévenir les erreurs de transcription et de frappe. Lorsqu&#8217;il est présenté avec le code Base58Check, le logiciel de décodage calcule la somme de contrôle des données et la compare à la somme de contrôle incluse dans le code. Si les deux ne correspondent pas, une erreur a été introduite et les données Base58Check ne sont pas valides. Cela empêche qu&#8217;une adresse Bitcoin mal saisie soit acceptée par le logiciel du portefeuille comme destination valide, une erreur qui entraînerait autrement une perte de fonds.</p>
</div>
<div class="paragraph">
<p>Pour convertir des données (un nombre) dans un format Base58Check, nous ajoutons d&#8217;abord un préfixe aux données, appelé "octet de version", qui sert à identifier facilement le type de données encodées. Par exemple, dans le cas d&#8217;une adresse Bitcoin, le préfixe est zéro (0x00 en hexadécimal), alors que le préfixe utilisé lors de l&#8217;encodage d&#8217;une clé privée est 128 (0x80 en hexadécimal). Une liste des préfixes de version courants est affichée dans <a href="#base58check_versions">Base58Check préfixe de version et exemples de résultats encodés</a>.</p>
</div>
<div class="paragraph">
<p>Ensuite, nous calculons la somme de contrôle "double-SHA", ce qui signifie que nous appliquons l&#8217;algorithme de hachage SHA256 deux fois sur le résultat précédent (préfixe et données):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>somme de contrôle (checksum) = SHA256(SHA256(préfixe+données))</pre>
</div>
</div>
<div class="paragraph">
<p>À partir du hachage de 32 octets résultant (hachage-d&#8217;un-hachage), nous ne prenons que les quatre premiers octets. Ces quatre octets servent de code de contrôle d&#8217;erreur ou de somme de contrôle (checksum). La somme de contrôle est concaténée (ajoutée) à la fin.</p>
</div>
<div class="paragraph">
<p>Le résultat est composé de trois éléments : un préfixe, les données et une somme de contrôle. Ce résultat est encodé en utilisant l&#8217;alphabet Base58 décrit précédemment. <a href="#base58check_encoding">Encodage Base58Check : un format Base58, versionné et à somme de contrôle pour encoder sans ambiguïté les données bitcoin</a> illustre le processus d&#8217;encodage Base58Check.</p>
</div>
<div id="base58check_encoding" class="imageblock">
<div class="content">
<img src="images/mbc2_0406.png" alt="Base58CheckEncoding">
</div>
<div class="title">Figure 6. Encodage Base58Check : un format Base58, versionné et à somme de contrôle pour encoder sans ambiguïté les données bitcoin</div>
</div>
<div class="paragraph">
<p>En bitcoin, la plupart des données présentées à l&#8217;utilisateur sont encodées en Base58Check pour les rendre compactes, faciles à lire et faciles à détecter les erreurs. Le préfixe de version dans l&#8217;encodage Base58Check est utilisé pour créer des formats faciles à distinguer qui, lorsqu&#8217;ils sont encodés en Base58, contiennent des caractères spécifiques au début de la charge utile encodée en Base58Check. Ces caractères permettent aux humains d&#8217;identifier facilement le type de données codées et comment les utiliser. C&#8217;est ce qui différencie, par exemple, une adresse Bitcoin encodée en Base58Check qui commence par un 1 d&#8217;une clé privée WIF encodée en Base58Check qui commence par un 5. Quelques exemples de préfixes de version et les caractères Base58 résultants sont affichés dans <a href="#base58check_versions">Base58Check préfixe de version et exemples de résultats encodés</a>.</p>
</div>
<table id="base58check_versions" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Base58Check préfixe de version et exemples de résultats encodés</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Préfixe de version (hex)</th>
<th class="tableblock halign-left valign-top">Préfixe de résultat Base58</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresse Bitcoin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresse de hachage Pay-to-Script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresse de test Bitcoin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x6F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m ou n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clé privée WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5, K ou L</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clé privée cryptée BIP-38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0142</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6P</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clé publique étendue BIP-32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0488B21E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xpub</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_formats_de_clé">Formats de clé</h4>
<div class="paragraph">
<p> Les clés privées et publiques peuvent être représentées dans un certain nombre de formats différents. Ces représentations codent tous le même nombre, même si elles semblent différentes. Ces formats sont principalement utilisés pour faciliter la lecture et la transcription des clés sans introduire d&#8217;erreurs.</p>
</div>
<div class="sect4">
<h5 id="priv_formats">Formats de clé privée</h5>
<div class="paragraph">
<p> La clé privée peut être représentée dans un certain nombre de formats différents, qui correspondent tous au même nombre de 256 bits. <a href="#table_4-2">Représentations de clés privées (formats d&#8217;encodage)</a> montre trois formats courants utilisés pour représenter les clés privées. Différents formats sont utilisés dans différentes circonstances. Les formats binaires hexadécimaux et bruts sont utilisés en interne dans les logiciels et rarement montrés aux utilisateurs. Le WIF est utilisé pour l&#8217;importation/exportation de clés entre portefeuilles et souvent utilisé dans les représentations de code QR (code-barres) des clés privées.</p>
</div>
<table id="table_4-2" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Représentations de clés privées (formats d&#8217;encodage)</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Préfixe</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brut</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 chiffres hexadécimaux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encodage Base58Check : Base58 avec préfixe de version 0x80 et somme de contrôle de 4 octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF compressé</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">K ou L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comme ci-dessus, avec le suffixe ajouté 0x01 avant l&#8217;encodage</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#table_4-3">Exemple : même clé, différents formats</a> affiche la clé privée générée dans ces trois formats.</p>
</div>
<table id="table_4-3" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Exemple : même clé, différents formats</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Clé privée</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF compressé</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Toutes ces représentations sont des manières différentes de montrer le même numéro, la même clé privée. Ils semblent différents, mais n&#8217;importe quel format peut facilement être converti en n&#8217;importe quel autre format. Notez que le "binaire brut" n&#8217;est pas affiché dans <a href="#table_4-3">Exemple : même clé, différents formats</a> car tout encodage à afficher ici ne serait, par définition, pas une donnée binaire brute.</p>
</div>
<div class="paragraph">
<p>Nous utilisons la commande <code>wif-to-ec</code> de Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) pour montrer que les deux clés WIF représentent la même clé privée :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx wif-to-ec 5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn
1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd

$ bx wif-to-ec KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ
1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_décoder_à_partir_de_base58check">Décoder à partir de Base58Check</h5>
<div class="paragraph">
<p>Les commandes de Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) facilitent l&#8217;écriture de scripts interface système (ou shell) à l&#8217;aide d'"opérateurs de transfert de données" en ligne de commande (ou "command-line pipes") qui manipulent les clés, les adresses et les transactions bitcoin. Vous pouvez utiliser Bitcoin Explorer pour décoder le format Base58Check sur la ligne de commande.</p>
</div>
<div class="paragraph">
<p>Nous utilisons la commande <code>base58check-decode</code> pour décoder la clé non compressée :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx base58check-decode 5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn
wrapper
{
    checksum 4286807748
    payload 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd
    version 128
}</pre>
</div>
</div>
<div class="paragraph">
<p>Le résultat contient la clé comme charge utile (payload), le préfixe de version WIF 128 et une somme de contrôle (checksum).</p>
</div>
<div class="paragraph">
<p>Notez que la "charge utile" (ou "payload") de la clé compressée est ajoutée avec le suffixe 01, signalant que la clé publique dérivée doit être compressée :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx base58check-decode KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ
wrapper
{
    checksum 2339607926
    payload 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd01
    version 128
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_encoder_de_lhex_vers_base58check">Encoder de l&#8217;hex vers Base58Check</h5>
<div class="paragraph">
<p>Pour encoder en Base58Check (l&#8217;inverse de la commande précédente), nous utilisons la commande <code>base58check-encode</code> de Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) et indiquez la clé privée hexadécimale, suivie du préfixe de version WIF 128 :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bx base58check-encode 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd --version 128
5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_encoder_de_lhex_clé_compressée_à_base58check">Encoder de l&#8217;hex (clé compressée) à Base58Check</h5>
<div class="paragraph">
<p>Pour encoder dans Base58Check comme une clé privée "compressée" (voir <a href="#comp_priv">Clés privées compressées</a>), nous ajoutons le suffixe <code>01</code> à la clé hexadécimale puis encodons comme dans la section précédente :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx base58check-encode 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd01 --version 128
KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</pre>
</div>
</div>
<div class="paragraph">
<p>Le format compressé WIF résultant commence par un "K". Cela indique que la clé privée à l&#8217;intérieur a un suffixe de "01" et sera utilisée pour produire des clés publiques compressées uniquement (voir <a href="#comp_pub">Clés publiques compressées</a>).</p>
</div>
</div>
<div class="sect4">
<h5 id="_formats_de_clé_publique">Formats de clé publique</h5>
<div class="paragraph">
<p>Les clés publiques sont également présentées de différentes manières, généralement sous forme de clés publiques <em>compressées</em> ou <em>non compressées</em>.</p>
</div>
<div class="paragraph">
<p>Comme nous l&#8217;avons vu précédemment, la clé publique est un point de la courbe elliptique constitué d&#8217;un couple de coordonnées (x,y). Il est généralement présenté avec le préfixe <code>04</code> suivi de deux nombres de 256 bits : un pour la coordonnée <em>x</em> du point, l&#8217;autre pour la coordonnée <em>y</em>. Le préfixe <code>04</code> est utilisé pour distinguer les clés publiques non compressées des clés publiques compressées qui commencent par un <code>02</code> ou un 03.</p>
</div>
<div class="paragraph">
<p>Voici la clé publique générée par la clé privée que nous avons créée précédemment, indiquée par les coordonnées <code>x</code> et y :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>x = F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A
y = 07CF33DA18BD734C600B96A72BBC4749D5141C90EC8AC328AE52DDFE2E505BDB</pre>
</div>
</div>
<div class="paragraph">
<p>Voici la même clé publique affichée sous la forme d&#8217;un nombre de 520 bits (130 chiffres hexadécimaux) avec le préfixe <code>04</code> suivi de <code>x</code> puis des coordonnées y, sous la forme 04 x y :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = 04F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A&amp;#x21b5;
07CF33DA18BD734C600B96A72BBC4749D5141C90EC8AC328AE52DDFE2E505BDB</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="comp_pub">Clés publiques compressées</h5>
<div class="paragraph">
<p>Des clés publiques compressées ont été introduites dans le bitcoin pour réduire la taille des transactions et économiser de l&#8217;espace disque sur les nœuds qui stockent la base de données de la chaîne de blocs Bitcoin. La plupart des transactions incluent la clé publique, qui est nécessaire pour valider les informations d&#8217;identification du propriétaire et dépenser le bitcoin. Chaque clé publique nécessite 520 bits (préfixe ` x ` y), ce qui, multiplié par plusieurs centaines de transactions par bloc, soit des dizaines de milliers de transactions par jour, ajoute une quantité importante de données à la chaîne de blocs.</p>
</div>
<div class="paragraph">
<p>Comme nous l&#8217;avons vu dans la section <a href="#pubkey">Clés publiques</a>, une clé publique est un point (x,y) sur une courbe elliptique. Parce que la courbe exprime une fonction mathématique, un point sur la courbe représente une solution à l&#8217;équation et, par conséquent, si nous connaissons la coordonnée <em>x</em>, nous pouvons calculer la coordonnée <em>y</em> en résolvant l&#8217;équation y<sup>2</sup> mod p = (x<sup>3</sup> + 7) mod p. Cela nous permet de stocker uniquement la coordonnée <em>x</em> du point de clé publique, en omettant la coordonnée <em>y</em> et en réduisant la taille de la clé et l&#8217;espace requis pour la stocker de 256 bits. Une réduction de près de 50 % de la taille de chaque transaction représente une grande quantité de données enregistrées au fil du temps !</p>
</div>
<div class="paragraph">
<p>Alors que les clés publiques non compressées ont un préfixe de 04, les clés publiques compressées commencent par un préfixe <code>02</code> ou 03. Regardons pourquoi il y a deux préfixes possibles : parce que le côté gauche de l&#8217;équation est <em>y</em><sup>2</sup>, la solution pour <em>y</em> est une racine carrée, qui peut avoir une valeur positive ou négative. Visuellement, cela signifie que la coordonnée <em>y</em> résultante peut être au-dessus ou au-dessous de l&#8217;axe des x. Comme vous pouvez le voir sur le graphique de la courbe elliptique en <a href="#ecc-curve">Une courbe elliptique</a>, la courbe est symétrique, c&#8217;est-à-dire qu&#8217;elle est réfléchie comme par un miroir à l&#8217;axe des abscisses. Ainsi, bien que nous puissions omettre la coordonnée <em>y</em>, nous devons stocker le <em>signe</em> de <em>y</em> (positif ou négatif) ; ou en d&#8217;autres termes, nous devons nous rappeler si c&#8217;était au-dessus ou au-dessous de l&#8217;axe des x parce que chacune de ces options représente un point différent et une clé publique différente. Lors du calcul de la courbe elliptique en arithmétique binaire sur le corps fini d&#8217;ordre premier p, la coordonnée <em>y</em> est paire ou impaire, ce qui correspond au signe positif/négatif comme expliqué précédemment. Ainsi, pour distinguer les deux valeurs possibles de <em>y</em>, on stocke une clé publique compressée avec le préfixe <code>02</code> si le <em>y</em> est pair, et <code>03</code> s&#8217;il est impair, permettant au logiciel de déduire correctement la coordonnée <em>y</em> de la coordonnée <em>x</em> et de décompresser la clé publique aux coordonnées complètes du point. La compression de clé publique est illustrée dans <a href="#pubkey_compression">Compression de clé publique</a>.</p>
</div>
<div class="paragraph">
<p>Voici la même clé publique générée précédemment, présentée sous la forme d&#8217;une clé publique compressée stockée sur 264 bits (66 chiffres hexadécimaux) avec le préfixe <code>03</code> indiquant que la coordonnée <em>y</em> est impaire :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = 03F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A</pre>
</div>
</div>
<div class="paragraph">
<p>Cette clé publique compressée correspond à la même clé privée, c&#8217;est-à-dire qu&#8217;elle est générée à partir de la même clé privée. Cependant, il semble différent de la clé publique non compressée. Plus important encore, si nous convertissons cette clé publique compressée en une adresse Bitcoin à l&#8217;aide de la fonction de double hachage (RIPEMD160(SHA256(K))), cela produira une adresse Bitcoin <em>différente</em>. Cela peut prêter à confusion, car cela signifie qu&#8217;une seule clé privée peut produire une clé publique exprimée dans deux formats différents (compressé et non compressé) qui produisent deux adresses Bitcoin différentes. Cependant, la clé privée est identique pour les deux adresses Bitcoin.</p>
</div>
<div id="pubkey_compression" class="imageblock smallerseventy">
<div class="content">
<img src="images/mbc2_0407.png" alt="Compression de pubkey">
</div>
<div class="title">Figure 7. Compression de clé publique</div>
</div>
<div class="paragraph">
<p>Les clés publiques compressées deviennent progressivement la valeur par défaut pour les clients Bitcoin, ce qui a un impact significatif sur la réduction de la taille des transactions et donc de la chaîne de blocs. Cependant, tous les clients ne prennent pas encore en charge les clés publiques compressées. Les clients plus récents qui prennent en charge les clés publiques compressées doivent comptabiliser les transactions des clients plus anciens qui ne prennent pas en charge les clés publiques compressées. Ceci est particulièrement important lorsqu&#8217;une application de portefeuille importe des clés privées à partir d&#8217;une autre application de portefeuille bitcoin, car le nouveau portefeuille doit analyser la chaîne de blocs pour trouver les transactions correspondant à ces clés importées. Quelles adresses Bitcoin le portefeuille Bitcoin doit-il rechercher ? Les adresses Bitcoin produites par des clés publiques non compressées, ou les adresses Bitcoin produites par des clés publiques compressées ? Les deux sont des adresses Bitcoin valides et peuvent être signées par la clé privée, mais ce sont des adresses différentes !</p>
</div>
<div class="paragraph">
<p>Pour résoudre ce problème, lorsque des clés privées sont exportées depuis un portefeuille, le WIF utilisé pour les représenter est implémenté différemment dans les nouveaux portefeuilles Bitcoin, pour indiquer que ces clés privées ont été utilisées pour produire des clés publiques <em>compressées</em> et donc des adresses Bitcoin <em>compressées</em>. Cela permet au portefeuille importateur de faire la distinction entre les clés privées provenant de portefeuilles plus anciens ou plus récents et de rechercher dans la chaîne de blocs des transactions avec des adresses Bitcoin correspondant respectivement aux clés publiques non compressées ou compressées. Voyons comment cela fonctionne plus en détail, dans la section suivante.</p>
</div>
</div>
<div class="sect4">
<h5 id="comp_priv">Clés privées compressées</h5>
<div class="paragraph">
<p>Ironiquement, le terme "clé privée compressée" est un abus de langage, car lorsqu&#8217;une clé privée est exportée au format WIF compressé, elle est en fait un octet <em>plus long</em> qu&#8217;une clé privée "non compressée". C&#8217;est parce que la clé privée a un suffixe d&#8217;un octet ajouté (affiché comme 01 en hexadécimal dans <a href="#table_4-4">Exemple : même clé, différents formats</a>), ce qui signifie que la clé privée provient d&#8217;un portefeuille plus récent et ne doit être utilisée que pour produire des clés publiques compressées. Les clés privées ne sont pas elles-mêmes compressées et ne peuvent pas être compressées. Le terme "clé privée compressée" signifie en réalité "clé privée à partir de laquelle seules les clés publiques compressées doivent être dérivées", tandis que "clé privée non compressée" signifie en réalité "clé privée à partir de laquelle seules les clés publiques non compressées doivent être dérivées". Vous devez uniquement faire référence au format d&#8217;exportation en tant que "WIF-compressé" ou "WIF" et ne pas faire référence à la clé privée elle-même en tant que "compressée" pour éviter toute confusion supplémentaire.</p>
</div>
<div class="paragraph">
<p><a href="#table_4-4">Exemple : même clé, différents formats</a> affiche la même clé, encodée aux formats WIF et WIF compressé.</p>
</div>
<table id="table_4-4" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Exemple : même clé, différents formats</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Clé privée</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex-compressé</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD01</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF compressé</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notez que le format de clé privée compressée en hexadécimal a un octet supplémentaire à la fin (01 en hexadécimal). Bien que le préfixe de version Base58Check soit le même (0x80) pour les formats WIF et WIF compressés, l&#8217;ajout d&#8217;un octet à la fin du numéro fait passer le premier caractère de l&#8217;encodage Base58 de 5 à <em>K</em> ou <em>L</em> . Considérez cela comme l&#8217;équivalent Base58 de la différence de codage décimal entre le nombre 100 et le nombre 99. Alors que 100 est un chiffre plus long que 99, il a également un préfixe de 1 au lieu d&#8217;un préfixe de 9. Lorsque la longueur change, il affecte le préfixe. En Base58, le préfixe 5 se transforme en <em>K</em> ou <em>L</em> lorsque la longueur du nombre augmente d&#8217;un octet.</p>
</div>
<div class="paragraph">
<p>N&#8217;oubliez pas que ces formats ne sont <em>pas</em> utilisés de manière interchangeable. Dans un portefeuille plus récent qui implémente des clés publiques compressées, les clés privées ne seront exportées qu&#8217;au format WIF compressé (avec un préfixe <em>K</em> ou <em>L</em>). Si le portefeuille est une implémentation plus ancienne et n&#8217;utilise pas de clés publiques compressées, les clés privées ne seront exportées qu&#8217;au format WIF (avec un préfixe 5). Le but ici est de signaler au portefeuille qui importe ces clés privées s&#8217;il doit rechercher dans la chaîne de blocs des clés et des adresses publiques compressées ou non.</p>
</div>
<div class="paragraph">
<p>Si un portefeuille bitcoin est capable d&#8217;implémenter des clés publiques compressées, il les utilisera dans toutes les transactions. Les clés privées du portefeuille seront utilisées pour dériver les points de clé publique sur la courbe, qui seront compressés. Les clés publiques compressées seront utilisées pour produire des adresses Bitcoin et celles-ci seront utilisées dans les transactions. Lors de l&#8217;exportation de clés privées à partir d&#8217;un nouveau portefeuille qui implémente des clés publiques compressées, le WIF est modifié, avec l&#8217;ajout d&#8217;un suffixe d&#8217;un octet <code>01</code> à la clé privée. La clé privée encodée en Base58Check qui en résulte est appelée "WIF compressé" et commence par la lettre <em>K</em> ou <em>L</em>, au lieu de commencer par "5" comme c&#8217;est le cas avec les clés encodées en WIF (non compressées) des portefeuilles plus anciens.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>"Clés privées compressées" est un terme impropre ! Ils ne sont pas compressés ; au lieu de cela, WIF-compressé signifie que les clés ne doivent être utilisées que pour dériver des clés publiques compressées et leurs adresses Bitcoin correspondantes. Ironiquement, une clé privée codée "compressée en WIF" est plus longue d&#8217;un octet car elle a le suffixe <code>01</code> ajouté pour la distinguer d&#8217;une clé "non compressée".</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implémentation_des_clés_et_des_adresses_dans_c">Implémentation des clés et des adresses dans C++</h3>
<div class="paragraph">
<p>Regardons le processus complet de création d&#8217;une adresse Bitcoin, d&#8217;une clé privée, à une clé publique (un point sur la courbe elliptique), à une adresse à hachage double, et enfin, l&#8217;encodage Base58Check. Le code C++ dans <a href="#addr_example">Création d&#8217;une adresse Bitcoin encodée en Base58Check à partir d&#8217;une clé privée</a> montre le processus complet étape par étape, de la clé privée à l&#8217;adresse Bitcoin encodée en Base58Check. L&#8217;exemple de code utilise la bibliothèque libbitcoin introduite dans <a href="#alt_libraries">[alt_libraries]</a> pour certaines fonctions d&#8217;assistance.</p>
</div>
<div id="addr_example" class="exampleblock">
<div class="title">Example 3. Création d&#8217;une adresse Bitcoin encodée en Base58Check à partir d&#8217;une clé privée</div>
<div class="content">
<div class="listingblock c_less_space">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">#include &lt;bitcoin/bitcoin.hpp&gt;

int main()
{
    // Chaîne de clé secrète privée en base16
    bc::ec_secret decoded;
    bc::decode_base16(decoded,
        "038109007313a5807b2eccc082c8c3fbb988a973cacf1a7df9ce725c31b14776");

    bc::wallet::ec_private secret(
        decoded, bc::wallet::ec_private::mainnet_p2kh);

    // Obtenir la clé publique.
    bc::wallet::ec_public public_key(secret);
    std::cout &lt;&lt; "Public key: " &lt;&lt; public_key.encoded() &lt;&lt; std::endl;

    // Créer une adresse Bitcoin.
    // Normalement, vous pouvez utiliser :
    //    bc::wallet::payment_address payaddr =
    //        public_key.to_payment_address(
    //            bc::wallet::ec_public::mainnet_p2kh);
    //  const std::string address = payaddr.encoded();

    // Calcule le hachage de la clé publique pour l'adresse P2PKH.
    bc::data_chunk public_key_data;
    public_key.to_data(public_key_data);
    const auto hash = bc::bitcoin_short_hash(public_key_data);

    bc::data_chunk unencoded_address;
    // Réserver 25 octets
    //   [ version:1  ]
    //   [ hash:20    ]
    //   [ checksum:4 ]
    unencoded_address.reserve(25);
    // Octet de version, 0 est l'adresse BTC normale (P2PKH).
    unencoded_address.push_back(0);
    // Données de hachage
    bc::extend_data(unencoded_address, hash);
    // La somme de contrôle est calculée en hachant les données et en ajoutant 4 octets à partir du hachage.
    bc::append_checksum(unencoded_address);
    // Enfin, nous devons encoder le résultat dans l'encodage base58 de Bitcoin.
    assert(unencoded_address.size() == 25);
    const std::string address = bc::encode_base58(unencoded_address);

    std::cout &lt;&lt; "Address: " &lt;&lt; address &lt;&lt; std::endl;
    return 0;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Le code utilise une clé privée prédéfinie pour produire la même adresse Bitcoin à chaque exécution, comme indiqué dans <a href="#addr_example_run">Compilation et exécution du code addr</a>.</p>
</div>
<div id="addr_example_run" class="exampleblock">
<div class="title">Example 4. Compilation et exécution du code addr</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Compiler le code addr.cpp
$ g++ -o addr addr.cpp -std=c++11 $(pkg-config --cflags --libs libbitcoin)
# Lancer l'exécutable addr
$ ./addr
Public key: 0202a406624211f2abbdc68da3df929f938c3399dd79fac1b51b0e4ad1d26a47aa
Address: 1PRTTaJesdNovgne6Ehcdu1fpEdX7913CK</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Le code dans <a href="#addr_example_run">Compilation et exécution du code addr</a> produit une adresse Bitcoin (1PRTT...) à partir d&#8217;une clé publique <em>compressée</em> (voir <a href="#comp_pub">Clés publiques compressées</a>). Si vous utilisiez la clé publique non compressée à la place, cela produirait une adresse Bitcoin différente (14K1y...).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_implémenter_des_clés_et_des_adresses_en_python">Implémenter des clés et des adresses en Python</h3>
<div class="paragraph">
<p> La bibliothèque bitcoin la plus complète en Python est <a href="https://github.com/vbuterin/pybitcointools">pybitcointools</a> par Vitalik Buterin. Dans <a href="#key-to-address_script">Génération et formatage de clés et d&#8217;adresses avec la bibliothèque pybitcointools</a>, nous utilisons la bibliothèque pybitcointools (importée en tant que "bitcoin") pour générer et afficher des clés et des adresses dans différents formats.</p>
</div>
<div id="key-to-address_script" class="exampleblock">
<div class="title">Example 5. Génération et formatage de clés et d&#8217;adresses avec la bibliothèque pybitcointools</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import bitcoin

# Générer une clé privée aléatoire
valid_private_key = False
while not valid_private_key:
    private_key = bitcoin.random_key()
    decoded_private_key = bitcoin.decode_privkey(private_key, 'hex')
    valid_private_key =  0 &lt; decoded_private_key &lt; bitcoin.N

print "Private Key (hex) is: ", private_key
print "Private Key (decimal) is: ", decoded_private_key

# Convertir la clé privée au format WIF
wif_encoded_private_key = bitcoin.encode_privkey(decoded_private_key, 'wif')
print "Private Key (WIF) is: ", wif_encoded_private_key

# Ajouter le suffixe "01" pour indiquer une clé privée compressée
compressed_private_key = private_key + '01'
print "Private Key Compressed (hex) is: ", compressed_private_key

# Générer un format WIF à partir de la clé privée compressée (WIF-compressé)
wif_compressed_private_key = bitcoin.encode_privkey(
    bitcoin.decode_privkey(compressed_private_key, 'hex'), 'wif')
print "Private Key (WIF-Compressed) is: ", wif_compressed_private_key

# Multipliez le point générateur EC G avec la clé privée pour obtenir un point de clé publique
public_key = bitcoin.fast_multiply(bitcoin.G, decoded_private_key)
print "Public Key (x,y) coordinates is:", public_key

# Encoder en hexadécimal, préfixe 04
hex_encoded_public_key = bitcoin.encode_pubkey(public_key,'hex')
print "Public Key (hex) is:", hex_encoded_public_key

# Compressez la clé publique, ajustez le préfixe selon que y est pair ou impair
(public_key_x, public_key_y) = public_key
if (public_key_y % 2) == 0:
    compressed_prefix = '02'
else:
    compressed_prefix = '03'
hex_compressed_public_key = compressed_prefix + bitcoin.encode(public_key_x, 16)
print "Compressed Public Key (hex) is:", hex_compressed_public_key

# Générer une adresse bitcoin à partir de la clé publique
print "Bitcoin Address (b58check) is:", bitcoin.pubkey_to_address(public_key)

# Générer une adresse bitcoin compressée à partir d'une clé publique compressée
print "Compressed Bitcoin Address (b58check) is:", \
    bitcoin.pubkey_to_address(hex_compressed_public_key)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#key-to-address_script_run">Exécution de key-to-address-ecc-example.py</a> affiche la sortie de l&#8217;exécution de ce code.</p>
</div>
<div id="key-to-address_script_run" class="exampleblock">
<div class="title">Example 6. Exécution de key-to-address-ecc-example.py</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ python key-to-address-ecc-example.py
Private Key (hex) is:
 3aba4162c7251c891207b747840551a71939b0de081f85c4e44cf7c13e41daa6
Private Key (decimal) is:
 26563230048437957592232553826663696440606756685920117476832299673293013768870
Private Key (WIF) is:
 5JG9hT3beGTJuUAmCQEmNaxAuMacCTfXuw1R3FCXig23RQHMr4K
Private Key Compressed (hex) is:
 3aba4162c7251c891207b747840551a71939b0de081f85c4e44cf7c13e41daa601
Private Key (WIF-Compressed) is:
 KyBsPXxTuVD82av65KZkrGrWi5qLMah5SdNq6uftawDbgKa2wv6S
Public Key (x,y) coordinates is:
 (41637322786646325214887832269588396900663353932545912953362782457239403430124L,
 16388935128781238405526710466724741593761085120864331449066658622400339362166L)
Public Key (hex) is:
 045c0de3b9c8ab18dd04e3511243ec2952002dbfadc864b9628910169d9b9b00ec&amp;#x21b5;
243bcefdd4347074d44bd7356d6a53c495737dd96295e2a9374bf5f02ebfc176
Compressed Public Key (hex) is:
 025c0de3b9c8ab18dd04e3511243ec2952002dbfadc864b9628910169d9b9b00ec
Bitcoin Address (b58check) is:
 1thMirt546nngXqyPEz532S8fLwbozud8
Compressed Bitcoin Address (b58check) is:
 14cxpo3MBCYYWCgF74SWTdcmxipnGUsPw3</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#ec_math">Un script démontrant les mathématiques de la courbe elliptique utilisées pour les clés bitcoin</a> est un autre exemple, utilisant la bibliothèque Python ECDSA pour les mathématiques de la courbe elliptique et sans utiliser de bibliothèques bitcoin spécialisées.</p>
</div>
<div id="ec_math" class="exampleblock">
<div class="title">Example 7. Un script démontrant les mathématiques de la courbe elliptique utilisées pour les clés bitcoin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import ecdsa
import os
from ecdsa.util import string_to_number, number_to_string

# secp256k1, http://www.oid-info.com/get/1.3.132.0.10
_p = 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2FL
_r = 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141L
_b = 0x0000000000000000000000000000000000000000000000000000000000000007L
_a = 0x0000000000000000000000000000000000000000000000000000000000000000L
_Gx = 0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798L
_Gy = 0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8L
curve_secp256k1 = ecdsa.ellipticcurve.CurveFp(_p, _a, _b)
generator_secp256k1 = ecdsa.ellipticcurve.Point(curve_secp256k1, _Gx, _Gy, _r)
oid_secp256k1 = (1, 3, 132, 0, 10)
SECP256k1 = ecdsa.curves.Curve("SECP256k1", curve_secp256k1, generator_secp256k1, oid_secp256k1) 
ec_order = _r

curve = curve_secp256k1
generator = generator_secp256k1

def random_secret():
    convert_to_int = lambda array: int("".join(array).encode("hex"), 16)
    
    # Collectez 256 bits de données aléatoires à partir du générateur aléatoire cryptographiquement sécurisé du système d'exploitation
    byte_array = os.urandom(32)
    
    return convert_to_int(byte_array)

def get_point_pubkey(point):
    if point.y() &amp; 1:
        key = '03' + '%064x' % point.x()
    else:
        key = '02' + '%064x' % point.x()
    return key.decode('hex')

def get_point_pubkey_uncompressed(point):
    key = '04' + \
          '%064x' % point.x() + \
          '%064x' % point.y()
    return key.decode('hex')


# Générez une nouvelle clé privée.
secret = random_secret()
print "Secret: ", secret

# Obtenez le point de clé publique.
point = secret * generator
print "EC point:", point

print "BTC public key:", get_point_pubkey(point).encode("hex")

# Étant donné le point (x, y), nous pouvons créer l'objet en utilisant :
point1 = ecdsa.ellipticcurve.Point(curve, point.x(), point.y(), ec_order)
assert point1 == point</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#ec_math_run">Installation de la bibliothèque Python ECDSA et exécution du script ec_math.py</a> affiche la sortie produite en exécutant ce script.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p><a href="#ec_math">Un script démontrant les mathématiques de la courbe elliptique utilisées pour les clés bitcoin</a> utilise os.urandom, qui reflète un générateur de nombres aléatoires cryptographiquement sécurisé (CSRNG) fourni par le système d&#8217;exploitation sous-jacent. Attention : Selon le système d&#8217;exploitation, <code>os.urandom</code> peut <em>ne pas</em> être implémenté avec une sécurité suffisante ou correctement amorcé et peut <em>ne pas</em> être approprié pour générer des clés bitcoin de qualité production.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="ec_math_run" class="exampleblock">
<div class="title">Example 8. Installation de la bibliothèque Python ECDSA et exécution du script ec_math.py</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre># Installer le gestionnaire de packages Python PIP
$ sudo apt-get install python-pip
# Installer la bibliothèque Python ECDSA
$ sudo pip install ecdsa
# Exécuter le script
$ python ec-math.py
Secret:  38090835015954358862481132628887443905906204995912378278060168703580660294000
EC point: (70048853531867179489857750497606966272382583471322935454624595540007269312627, 105262206478686743191060800263479589329920209527285803935736021686045542353380)
BTC public key: 029ade3effb0a67d5c8609850d797366af428f4a0d5194cb221d807770a1522873</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_clés_et_adresses_avancées">Clés et adresses avancées</h3>
<div class="paragraph">
<p>Dans les sections suivantes, nous examinerons les formes avancées de clés et d&#8217;adresses, telles que les clés privées cryptées, les adresses de script et des multisignatures, les adresses personnalisées, et les portefeuilles en papier.</p>
</div>
<div class="sect3">
<h4 id="p2sh_addresses">Pay-to-Script Hash (P2SH) et adresses multisig</h4>
<div class="paragraph">
<p>("Pay-to-Script-Hash (P2SH)", "adresses multisig et")Comme nous le savons, les adresses Bitcoin traditionnelles commencent par le chiffre "1" et sont dérivées de la clé publique, qui est dérivé de la clé privée. Bien que n&#8217;importe qui puisse envoyer des bitcoins à une adresse "1", ce bitcoin ne peut être dépensé qu&#8217;en présentant la signature de la clé privée et la clé publique correspondantes.</p>
</div>
<div class="paragraph">
<p>Les adresses Bitcoin qui commencent par le chiffre "3" sont des adresses Pay-to-Script Hash (P2SH ou hachage de paiement-à-script), parfois appelées à tort adresses multisig ou adresses multisignatures. Ils désignent le bénéficiaire d&#8217;une transaction bitcoin comme le hachage d&#8217;un script, au lieu du propriétaire d&#8217;une clé publique. La fonctionnalité a été introduite en janvier 2012 avec BIP-16 (voir <a href="#appdxbitcoinimpproposals">[appdxbitcoinimpproposals]</a>), et est largement adopté car il offre la possibilité d&#8217;ajouter des fonctionnalités à l&#8217;adresse elle-même. Contrairement aux transactions qui "envoient" des fonds aux adresses Bitcoin traditionnelles "1", également connues sous le nom de hachage de clé publique (P2PKH), les fonds envoyés aux adresses "3" nécessitent quelque chose de plus que la présentation d&#8217;une clé publique et une signature de clé privée comme preuve de propriété. Les exigences sont désignées au moment de la création de l&#8217;adresse, dans le script, et toutes les entrées de cette adresse seront encombrées des mêmes exigences.</p>
</div>
<div class="paragraph">
<p>Une adresse P2SH est créée à partir d&#8217;un script de transaction, qui définit qui peut dépenser une sortie de transaction (pour plus de détails, voir <a href="#p2sh">[p2sh]</a>). L&#8217;encodage d&#8217;une adresse P2SH consiste à utiliser la même fonction de double hachage que celle utilisée lors de la création d&#8217;une adresse Bitcoin, appliquée uniquement sur le script à la place de la clé publique :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>hachage de script = RIPEMD160(SHA256(script))</pre>
</div>
</div>
<div class="paragraph">
<p>Le "hachage de script" résultant est encodé avec Base58Check avec un préfixe de version de 5, ce qui donne une adresse encodée commençant par un 3. Un exemple d&#8217;adresse P2SH est 3F6i6kwkevjR7AsAd4te2YB2zZyASEm1HM, qui peut être dérivée à l&#8217;aide des commandes Bitcoin Explorer script-encode, sha256, <code>ripemd160</code> et <code>base58check-encode</code> (voir <a href="#appdx_bx">[appdx_bx]</a>) comme suit :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ echo \
'DUP HASH160 [89abcdefabbaabbaabbaabbaabbaabbaabbaabba] EQUALVERIFY CHECKSIG' &gt; script
$ bx script-encode &lt; script | bx sha256 | bx ripemd160 \
| bx base58check-encode --version 5
3F6i6kwkevjR7AsAd4te2YB2zZyASEm1HM</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>P2SH n&#8217;est pas nécessairement la même chose qu&#8217;une transaction standard multisignature. Une adresse P2SH représente <em>le plus souvent</em> un script multi-signatures, mais elle peut également représenter un script codant d&#8217;autres types de transactions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_adresses_multisignatures_et_p2sh">Adresses multisignatures et P2SH</h5>
<div class="paragraph">
<p>Actuellement, l&#8217;implémentation la plus courante de la fonction P2SH est le script d&#8217;adresse multisignature. Comme son nom l&#8217;indique, le script sous-jacent nécessite un nombre minimum de signatures pour prouver la propriété et donc dépenser des fonds. La fonctionnalité de multisignature bitcoin est conçue pour exiger M signatures (également appelées «seuil») à partir d&#8217;un total de N clés, appelées multisig M-de-N, où M est égal ou inférieur à N. Par exemple , Bob le propriétaire du café de <a href="#ch01_intro_what_is_bitcoin">[ch01_intro_what_is_bitcoin]</a> pourrait utiliser une adresse multisignature nécessitant 1 sur 2 signatures d&#8217;une clé lui appartenant et d&#8217;une clé appartenant à son ou sa conjointe, garantissant que l&#8217;un ou l&#8217;autre pourrait signer pour passer une sortie de transaction verrouillée à cette adresse. Cela ressemblerait à un «compte conjoint» tel qu&#8217;il est mis en œuvre dans les banques traditionnelles où l&#8217;un ou l&#8217;autre des conjoints peut dépenser avec une seule signature. Gopesh, le concepteur Web payé par Bob pour créer un site Web, pourrait avoir une adresse multisignature 2 sur 3 pour son entreprise qui garantit qu&#8217;aucun fonds ne peut être dépensé à moins qu&#8217;au moins deux des partenaires commerciaux ne signent une transaction.</p>
</div>
<div class="paragraph">
<p>Nous explorerons comment créer des transactions qui dépensent des fonds à partir d&#8217;adresses P2SH (et multisignatures) dans <a href="#transactions">[transactions]</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adresses_personnalisées">Adresses personnalisées</h4>
<div class="paragraph">
<p>Les adresses personnalisées sont des adresses Bitcoin valides qui contiennent des messages lisibles par l&#8217;homme. Par exemple, <code>1LoveBPzzD72PUXLzCkYAtGFYmK5vYNR33</code> est une adresse valide qui contient les lettres formant le mot "Love" comme les quatre premières lettres Base58. Les adresses personnalisées nécessitent de générer et de tester des milliards de clés privées candidates, jusqu&#8217;à ce qu&#8217;une adresse Bitcoin avec le modèle souhaité soit trouvée. Bien qu&#8217;il y ait quelques optimisations dans l&#8217;algorithme de génération de vanité, le processus consiste essentiellement à choisir une clé privée au hasard, à dériver la clé publique, à dériver l&#8217;adresse Bitcoin et à vérifier si elle correspond au modèle de vanité souhaité, en répétant des milliards de fois jusqu&#8217;à ce qu&#8217;un correspondance est trouvée.</p>
</div>
<div class="paragraph">
<p>Une fois qu&#8217;une adresse personnalisée correspondant au modèle souhaité est trouvée, la clé privée dont elle est dérivée peut être utilisée par le propriétaire pour dépenser des bitcoins exactement de la même manière que n&#8217;importe quelle autre adresse. Les adresses personnalisées ne sont ni moins ni plus sécurisées que toute autre adresse. Ils dépendent de la même cryptographie à courbe elliptique (ECC) et SHA que toute autre adresse. Vous ne pouvez pas plus facilement trouver la clé privée d&#8217;une adresse commençant par un modèle de vanité que vous ne le pouvez de n&#8217;importe quelle autre adresse.</p>
</div>
<div class="paragraph">
<p>Dans <a href="#ch01_intro_what_is_bitcoin">[ch01_intro_what_is_bitcoin]</a>, nous avons présenté Eugenia, directrice d&#8217;une association caritative pour enfants opérant aux Philippines. Disons qu&#8217;Eugenia organise une collecte de fonds en bitcoins et souhaite utiliser une adresse personnalisée Bitcoin pour faire connaître la collecte de fonds. Eugenia créera une adresse de vanité qui commence par "1Kids" pour promouvoir la collecte de fonds caritative pour les enfants. Voyons comment cette adresse personnalisée sera créée et ce que cela signifie pour la sécurité de l&#8217;association caritative d&#8217;Eugenia.</p>
</div>
<div class="sect4">
<h5 id="_génération_dadresses_personnalisées">Génération d&#8217;adresses personnalisées</h5>
<div class="paragraph">
<p>Il est important de réaliser qu&#8217;une adresse Bitcoin est simplement un nombre représenté par des symboles dans l&#8217;alphabet Base58. La recherche d&#8217;un modèle comme "1Kids" peut être considérée comme la recherche d&#8217;une adresse comprise entre <code>1Kids1111111111111111111111111111</code> et 1Kidszzzzzzzzzzzzzzzzzzzzzzzzzz. Il y a environ 58 ^ 29 ^ (environ 1,4 * 10 ^ 51 ^) adresses dans cette plage, toutes commençant par "1Kids". <a href="#table_4-11">La plage d&#8217;adresses personnalisées (ou de vanités) commençant par "1Kids"</a> affiche la plage d&#8217;adresses qui ont le préfixe 1Kids.</p>
</div>
<table id="table_4-11" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. La plage d&#8217;adresses personnalisées (ou de vanités) commençant par "1Kids"</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>De</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids11111111111111111111111111111</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids11111111111111111111111111112</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids11111111111111111111111111113</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">...</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>À</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kidszzzzzzzzzzzzzzzzzzzzzzzzzzzzz</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Regardons le modèle "1Kids" comme un nombre et voyons à quelle fréquence nous pourrions trouver ce modèle dans une adresse Bitcoin (voir <a href="#table_4-12">La fréquence d&#8217;un modèle de vanité (1KidsCharity) et le temps de recherche moyen sur un PC de bureau</a>). Un ordinateur de bureau moyen, sans aucun matériel spécialisé, peut rechercher environ 100 000 clés par seconde.</p>
</div>
<table id="table_4-12" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. La fréquence d&#8217;un modèle de vanité (1KidsCharity) et le temps de recherche moyen sur un PC de bureau</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Longueur</th>
<th class="tableblock halign-left valign-top">Motif</th>
<th class="tableblock halign-left valign-top">Fréquence</th>
<th class="tableblock halign-left valign-top">Temps de recherche moyen</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1K</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 58 touches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; 1 millisecondes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Ki</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 3 364</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50 millisecondes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 195 000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; 2 secondes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 11 millions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 minute</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 656 millions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 heure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 38 milliards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 jours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 2,2 trillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3–4 mois</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsChar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 128 billions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13–18 ans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsChari</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 7 quadrillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">800 ans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCharit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 400 quadrillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">46 000 ans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCharity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 23 quintillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2,5 millions d&#8217;années</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Comme vous pouvez le voir, Eugenia ne créera pas de sitôt l&#8217;adresse personnalisée "1KidsCharity", même si elle avait accès à plusieurs milliers d&#8217;ordinateurs. Chaque caractère supplémentaire augmente la difficulté d&#8217;un facteur de 58. Les modèles de plus de sept caractères sont généralement trouvés par du matériel spécialisé, tel que des ordinateurs de bureau personnalisés avec plusieurs GPU. Ce sont souvent des "plates-formes" de minage de bitcoin réutilisées qui ne sont plus rentables pour le minage de bitcoin mais peuvent être utilisées pour trouver des adresses personnalisées. Les recherches d&#8217;adresse personnalisées (ou de vanités) sur les systèmes GPU sont de plusieurs ordres de grandeur plus rapides que sur un processeur à usage général.</p>
</div>
<div class="paragraph">
<p>Une autre façon de trouver une adresse de vanité consiste à sous-traiter le travail à un groupe ou bassin de mineurs de vanité, comme le groupe sur <a href="https://vanitypool.appspot.com">Vanity Pool</a>. Un groupe ou bassin de ce type est un service qui permet à ceux qui disposent de matériel GPU de gagner des bitcoins en recherchant des adresses personnalisées pour les autres. Pour un petit paiement (0,01 bitcoin ou environ 5 $ au moment d&#8217;écrire ces lignes), Eugenia peut externaliser la recherche d&#8217;une adresse personnalisée à sept caractères et obtenir des résultats en quelques heures au lieu d&#8217;avoir à exécuter une recherche de CPU pendant des mois.</p>
</div>
<div class="paragraph">
<p>Générer une adresse personnalisée est un exercice de force brute : essayez une clé aléatoire, vérifiez l&#8217;adresse résultante pour voir si elle correspond au modèle souhaité, et répétez jusqu&#8217;à ce que vous réussissiez. <a href="#vanity_miner_code">Mineur d&#8217;adresse personnalisées (ou de vanité)</a> montre un exemple de "mineur de vanité", un programme conçu pour trouver des adresses personnalisées, écrit en C++. L&#8217;exemple utilise la bibliothèque libbitcoin, que nous avons introduite dans <a href="#alt_libraries">[alt_libraries]</a>.</p>
</div>
<div id="vanity_miner_code" class="exampleblock">
<div class="title">Example 9. Mineur d&#8217;adresse personnalisées (ou de vanité)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">#include &lt;random&gt;
#include &lt;bitcoin/bitcoin.hpp&gt;

// La chaîne que nous recherchons
const std::string search = "1kid";

// Générer une clé secrète aléatoire. Un 32 octets aléatoires.
bc::ec_secret random_secret(std::default_random_engine&amp; engine);
// Extraire l'adresse Bitcoin d'un secret EC.
std::string bitcoin_address(const bc::ec_secret&amp; secret);
// Comparaison insensible à la casse avec la chaîne de recherche.
bool match_found(const std::string&amp; address);

int main()
{
    // random_device sous Linux utilise "/dev/urandom"
    // ATTENTION : selon la mise en œuvre, ce RNG peut ne pas être suffisamment sécurisé !
    // Ne pas utiliser les clés personnalisées générées par cet exemple en production
    std::random_device random;
    std::default_random_engine engine(random());
    
    // Boucle en continu...
    while (true)
    {
        // Générer un secret aléatoire.
        bc::ec_secret secret = random_secret(engine);
        // Obtenez l'adresse.
        std::string address = bitcoin_address(secret);
        // Correspond-il à votre chaîne de recherche ? (1kid)
        if (match_found(address))
        {
            // Succès!
            std::cout &lt;&lt; "Found vanity address! " &lt;&lt; address &lt;&lt; std::endl;
            std::cout &lt;&lt; "Secret: " &lt;&lt; bc::encode_base16(secret) &lt;&lt; std::endl;
            return 0;
        }
    }
    // Ne devrait jamais arriver ici !
    return 0;
}

bc::ec_secret random_secret(std::default_random_engine&amp; engine)
{
    // Créer un nouveau secret...
    bc::ec_secret secret;
    // Itérer sur chaque octet en définissant une valeur aléatoire...
    for (uint8_t&amp; byte: secret)
        byte = engine() % std::numeric_limits&lt;uint8_t&gt;::max();
    // Renvoyer le résultat.
    return secret;
}

std::string bitcoin_address(const bc::ec_secret&amp; secret)
{
    // Convertir le secret en adresse de paiement
    bc::wallet::ec_private private_key(secret);
    bc::wallet::payment_address payaddr(private_key);
    // Retourner le formulaire encodé.
    return payaddr.encoded();
}

bool match_found(const std::string&amp; address)
{
    auto addr_it = address.begin();
    // Parcourez la chaîne de recherche en la comparant au caractère minuscule de l'adresse fournie.
    for (auto it = search.begin(); it != search.end(); ++it, ++addr_it)
        if (*it != std::tolower(*addr_it))
            return false;
    // Fin de la chaîne de recherche atteinte, donc l'adresse correspond.
    return true;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><a href="#vanity_miner_code">Mineur d&#8217;adresse personnalisées (ou de vanité)</a> utilise std::random_device. Selon l&#8217;implémentation, cela peut refléter un CSRNG fourni par le système d&#8217;exploitation sous-jacent. Dans le cas d&#8217;un système d&#8217;exploitation de type Unix tel que Linux, il tire de /dev/urandom. Le générateur de nombres aléatoires utilisé ici est à des fins de démonstration n&#8217;est <em>pas</em> approprié pour générer des clés bitcoin de qualité production car il n&#8217;est pas implémenté avec une sécurité suffisante.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>L&#8217;exemple de code doit être compilé à l&#8217;aide d&#8217;un compilateur C++ et lié à la bibliothèque libbitcoin (qui doit d&#8217;abord être installée sur ce système). Pour exécuter l&#8217;exemple, lancez l&#8217;exécutable vanity-miner sans paramètres (voir <a href="#vanity_miner_run">Compilation et exécution de l&#8217;exemple vanity-miner</a>) et il tentera de trouver une adresse personnalisée commençant par "1kid".</p>
</div>
<div id="vanity_miner_run" class="exampleblock">
<div class="title">Example 10. Compilation et exécution de l&#8217;exemple vanity-miner</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Compiler le code avec g++
$ g++ -o vanity-miner vanity-miner.cpp $(pkg-config --cflags --libs libbitcoin)
# Exécutez l'exemple
$ ./vanity-miner
Found vanity address! 1KiDzkG4MxmovZryZRj8tK81oQRhbZ46YT
Secret: 57cc268a05f83a23ac9d930bc8565bac4e277055f4794cbd1a39e5e71c038f3f
# Exécutez-le à nouveau pour un résultat différent
$ ./vanity-miner
Found vanity address! 1Kidxr3wsmMzzouwXibKfwTYs5Pau8TUFn
Secret: 7f65bbbbe6d8caae74a0c6a0d2d7b5c6663d71b60337299a1a2cf34c04b2a623
# Utilisez "time" pour voir combien de temps il faut pour trouver un résultat
$ time ./vanity-miner
Found vanity address! 1KidPWhKgGRQWD5PP5TAnGfDyfWp5yceXM
Secret: 2a802e7a53d8aa237cd059377b616d2bfcfa4b0140bc85fa008f2d3d4b225349

real	0m8.868s
user	0m8.828s
sys	0m0.035s</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exemple de code prendra quelques secondes pour trouver une correspondance pour le modèle à trois caractères "kid", comme nous pouvons le voir lorsque nous utilisons la commande Unix <code>time</code> pour mesurer le temps d&#8217;exécution. Modifiez le modèle <code>search</code> dans le code source et voyez combien de temps cela prend pour les modèles à quatre ou cinq caractères !</p>
</div>
</div>
<div class="sect4">
<h5 id="_sécurité_de_ladresse_personnalisée">Sécurité de l&#8217;adresse personnalisée</h5>
<div class="paragraph">
<p>Les adresses personnalisées peuvent être utilisées pour améliorer <em>et</em> pour contourner les mesures de sécurité ; ils sont vraiment une épée à double tranchant. Utilisée pour améliorer la sécurité, une adresse distinctive rend plus difficile pour les adversaires de substituer leur propre adresse et de tromper vos clients en les payant à votre place. Malheureusement, les adresses personnalisées permettent également à quiconque de créer une adresse qui <em>ressemble</em> à n&#8217;importe quelle adresse aléatoire, ou même à une autre adresse personnalisée, trompant ainsi vos clients.</p>
</div>
<div class="paragraph">
<p>Eugenia pourrait annoncer une adresse générée aléatoirement (par exemple, 1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy) à laquelle les gens peuvent envoyer leurs dons. Ou, elle pourrait générer une adresse de vanité qui commence par 1Kids, pour la rendre plus distinctive.</p>
</div>
<div class="paragraph">
<p>Dans les deux cas, l&#8217;un des risques d&#8217;utiliser une seule adresse fixe (plutôt qu&#8217;une adresse dynamique distincte par donateur) est qu&#8217;un voleur puisse s&#8217;infiltrer dans votre site Web et le remplacer par sa propre adresse, détournant ainsi les dons vers lui. Si vous avez annoncé votre adresse de don à plusieurs endroits différents, vos utilisateurs peuvent inspecter visuellement l&#8217;adresse avant d&#8217;effectuer un paiement pour s&#8217;assurer qu&#8217;il s&#8217;agit de la même adresse qu&#8217;ils ont vue sur votre site Web, sur votre e-mail et sur votre dépliant. Dans le cas d&#8217;une adresse aléatoire comme 1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy, l&#8217;utilisateur moyen inspectera peut-être les premiers caractères "1J7mdg" et sera satisfait que l&#8217;adresse corresponde. À l&#8217;aide d&#8217;un générateur d&#8217;adresses personnalisées, une personne ayant l&#8217;intention de voler en substituant une adresse d&#8217;apparence similaire peut rapidement générer des adresses qui correspondent aux premiers caractères, comme indiqué dans <a href="#table_4-13">Génération d&#8217;adresses personnalisées pour correspondre à une adresse aléatoire</a>.</p>
</div>
<table id="table_4-13" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Génération d&#8217;adresses personnalisées pour correspondre à une adresse aléatoire</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Adresse aléatoire originale</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Vanité (correspondance à 4 caractères)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7md1QqU4LpctBetHS2ZoyLV5d6dShhEy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Vanité (correspondance à 5 caractères)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7mdgYqyNd4ya3UEcq31Q7sqRMXw2XZ6n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Vanité (correspondance à 6 caractères)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7mdg5WxGENmwyJP9xuGhG5KRzu99BBCX</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Alors, une adresse personnalisée augmente-t-elle la sécurité ? Si Eugenia génère l&#8217;adresse personnalisée 1Kids33q44erFfpeXrmDSz7zEqG2FesZEN, les utilisateurs sont susceptibles de regarder le mot de modèle personnalisé <em>et quelques caractères au-delà</em>, par exemple en remarquant la partie "1Kids33" de l&#8217;adresse. Cela obligerait un attaquant à générer une adresse de vanité correspondant à au moins six caractères (deux de plus), en déployant un effort 3 364 fois (58 × 58) supérieur à l&#8217;effort qu&#8217;Eugenia a dépensé pour sa vanité à 4 caractères. Essentiellement, l&#8217;effort qu&#8217;Eugenia déploie (ou paie une vanité pour) "pousse" l&#8217;attaquant à devoir produire une vanité de modèle plus longue. Si Eugenia paie un pool pour générer une adresse de vanité à 8 caractères, l&#8217;attaquant serait poussé dans le domaine de 10 caractères, ce qui est irréalisable sur un ordinateur personnel et coûteux même avec une plate-forme d&#8217;extraction de vanité personnalisée ou un pool de vanité. Ce qui est abordable pour Eugenia devient inabordable pour l&#8217;attaquant, surtout si la récompense potentielle de la fraude n&#8217;est pas assez élevée pour couvrir le coût de la génération d&#8217;adresse personnalisée.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="paper_wallets">Portefeuilles en papier</h4>
<div class="paragraph">
<p> Les paper wallets, ou les portefeuilles en papier, sont des clés privées bitcoin imprimées sur papier. Souvent, le portefeuille papier comprend également l&#8217;adresse Bitcoin correspondante pour plus de commodité, mais ce n&#8217;est pas nécessaire car elle peut être dérivée de la clé privée.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Les portefeuilles en papier sont une technologie OBSOLÈTE et sont dangereux pour la plupart des utilisateurs. Il existe de nombreux pièges subtils impliqués dans leur génération, notamment la possibilité que le code de génération soit compromis par une "porte dérobée". Des centaines de bitcoins ont été volés de cette façon. Les portefeuilles en papier sont présentés ici à titre informatif uniquement et ne doivent pas être utilisés pour stocker des bitcoins. Utilisez une phrase mnémonique BIP-39 pour sauvegarder vos clés. Utilisez un portefeuille matériel pour stocker des clés et signer des transactions. N&#8217;UTILISEZ PAS DE PORTEFEUILLES EN PAPIER.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les portefeuilles en papier se présentent sous de nombreuses formes, tailles et conceptions, mais à un niveau très basique, il ne s&#8217;agit que d&#8217;une clé et d&#8217;une adresse imprimées sur papier. <a href="#table_4-14">La forme la plus simple d&#8217;un portefeuille papier - une impression de l&#8217;adresse Bitcoin et de la clé privée</a> montre la forme la plus simple d&#8217;un portefeuille en papier.</p>
</div>
<table id="table_4-14" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. La forme la plus simple d&#8217;un portefeuille papier - une impression de l&#8217;adresse Bitcoin et de la clé privée</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Adresse publique</th>
<th class="tableblock halign-left valign-top">Clé privée (WIF)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1424C2F4bC9JidNjjTUZCbUxv6Sa1Mt62x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les portefeuilles en papier sont disponibles dans de nombreux modèles et tailles, avec de nombreuses fonctionnalités différentes. <a href="#paper_wallet_simple">Un exemple de portefeuille en papier simple</a> montre un exemple de portefeuille en papier.</p>
</div>
<div id="paper_wallet_simple" class="imageblock">
<div class="content">
<img src="images/mbc2_0408.png" alt="mbc2 0408">
</div>
<div class="title">Figure 8. Un exemple de portefeuille en papier simple</div>
</div>
<div class="paragraph">
<p>Certains sont destinés à être offerts en cadeau et ont des thèmes saisonniers, tels que les thèmes de Noël et du Nouvel An. D&#8217;autres sont conçus pour être stockés dans un coffre-fort de banque ou un coffre-fort avec la clé privée cachée d&#8217;une manière ou d&#8217;une autre, soit avec des autocollants opaques à gratter, soit pliés et scellés avec une feuille adhésive inviolable.</p>
</div>
<div class="paragraph">
<p>D&#8217;autres conceptions comportent des copies supplémentaires de la clé et de l&#8217;adresse, sous la forme de talons détachables similaires aux talons de ticket, vous permettant de stocker plusieurs copies pour vous protéger contre les incendies, les inondations ou d&#8217;autres catastrophes naturelles.</p>
</div>
<div id="paper_wallet_spw" class="imageblock">
<div class="content">
<img src="images/mbc2_0412.png" alt="mbc2 0412">
</div>
<div class="title">Figure 9. Un exemple de portefeuille papier avec des copies supplémentaires des clés sur un "talon" de sauvegarde</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-03-23 22:28:05 -0400
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>